import{j as e,K as j,C as w,H as I,t as O,O as G}from"./ui-BLaX9ps4.js";import{r as d}from"./router-CLvrYEWH.js";import{B}from"./Breadcrumb-DLoGhAph.js";import{a as K,b as V,s as o,o as Q,d as u,c as f,l as T}from"./index-DZNrztJB.js";import"./vendor-RGnvvjkK.js";const X=Q({show_hero:f(),hero_title:u().optional(),hero_description:u().optional(),hero_bg_image_url:u().url().optional().or(T("")),hero_cta_label:u().optional(),hero_cta_url:u().url().optional().or(T("")),show_form:f(),show_info:f(),show_socials:f(),show_hours:f(),success_message:u().optional()}),C={show_hero:!0,hero_title:"Contact Me",hero_description:"프로젝트나 협업에 관심이 있으시다면 언제든 연락주세요! 새로운 아이디어나 기술에 대한 이야기를 나누고 싶습니다.",hero_bg_image_url:"",hero_cta_label:"",hero_cta_url:"",show_form:!0,show_info:!0,show_socials:!0,show_hours:!0,success_message:"메시지가 성공적으로 전송되었습니다! 곧 답변드리겠습니다."},ae=()=>{const[q,z]=d.useState(!0),[D,n]=d.useState(!1),[$,g]=d.useState(""),[H,b]=d.useState(""),[k,L]=d.useState(()=>JSON.parse(localStorage.getItem("contactSettingsExpanded")||"true")),[N,P]=d.useState(()=>JSON.parse(localStorage.getItem("contactHeroExpanded")||"true")),[_,U]=d.useState(()=>JSON.parse(localStorage.getItem("contactInfoExpanded")||"true")),[v,W]=d.useState(()=>JSON.parse(localStorage.getItem("contactSocialsExpanded")||"false")),[S,A]=d.useState(()=>JSON.parse(localStorage.getItem("contactHoursExpanded")||"false")),[h,c]=d.useState([]),[m,i]=d.useState([]),[y,p]=d.useState([]),{register:x,handleSubmit:F,reset:J}=K({resolver:V(X),defaultValues:C});d.useEffect(()=>{(async()=>{try{z(!0);const{data:a,error:t}=await o.from("contact_page_settings").select("*").eq("id","default").maybeSingle();if(t)throw t;a&&J({show_hero:a.show_hero??!0,hero_title:a.hero_title??C.hero_title,hero_description:a.hero_description??C.hero_description,hero_bg_image_url:a.hero_bg_image_url??"",hero_cta_label:a.hero_cta_label??"",hero_cta_url:a.hero_cta_url??"",show_form:a.show_form??!0,show_info:a.show_info??!0,show_socials:a.show_socials??!0,show_hours:a.show_hours??!0,success_message:a.success_message??C.success_message});const{data:s}=await o.from("contact_info").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});c(s??[]);const{data:l}=await o.from("contact_socials").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});i(l??[]);const{data:E}=await o.from("contact_hours").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});p(E??[])}catch(a){g(a.message||"설정을 불러오지 못했습니다.")}finally{z(!1)}})()},[J]);const R=async r=>{n(!0),g(""),b("");try{const a={id:"default",show_hero:r.show_hero,hero_title:r.hero_title||null,hero_description:r.hero_description||null,hero_bg_image_url:r.hero_bg_image_url||null,hero_cta_label:r.hero_cta_label||null,hero_cta_url:r.hero_cta_url||null,show_form:r.show_form,show_info:r.show_info,show_socials:r.show_socials,show_hours:r.show_hours,success_message:r.success_message||null,updated_at:new Date().toISOString()},{error:t}=await o.from("contact_page_settings").upsert(a,{onConflict:"id"});if(t)throw t;b("설정을 저장했습니다.")}catch(a){g(a.message||"설정 저장에 실패했습니다.")}finally{n(!1)}};return e.jsxs("div",{className:"w-full",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx(B,{items:[{label:"페이지 관리",path:"/admin/pages/contact"},{label:"Contact"}]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Contact 페이지 관리"})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:q?e.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"불러오는 중..."}):e.jsxs("form",{onSubmit:F(R),className:"space-y-8",children:[$&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:$}),H&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-600 dark:text-green-400 px-4 py-3 rounded-md",children:H}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>{const r=!k;L(r),localStorage.setItem("contactSettingsExpanded",JSON.stringify(r))},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"섹션 표시 설정"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"히어로/폼/연락처/소셜/업무시간 섹션을 켜고 끌 수 있습니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":k?"접기":"펼치기",children:k?e.jsx(j,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(w,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),k&&e.jsxs("div",{className:"p-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"Hero 표시"}),e.jsx("input",{type:"checkbox",className:"h-5 w-5",...x("show_hero")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"폼 표시"}),e.jsx("input",{type:"checkbox",className:"h-5 w-5",...x("show_form")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"연락처 표시"}),e.jsx("input",{type:"checkbox",className:"h-5 w-5",...x("show_info")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"소셜 링크 표시"}),e.jsx("input",{type:"checkbox",className:"h-5 w-5",...x("show_socials")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"업무 가능 시간 표시"}),e.jsx("input",{type:"checkbox",className:"h-5 w-5",...x("show_hours")})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>{const r=!N;P(r),localStorage.setItem("contactHeroExpanded",JSON.stringify(r))},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Hero 설정"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"타이틀/설명/배경 이미지/CTA 버튼을 설정합니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":N?"접기":"펼치기",children:N?e.jsx(j,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(w,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),N&&e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"타이틀"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",...x("hero_title")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"배경 이미지 URL"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",...x("hero_bg_image_url")})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"설명"}),e.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",...x("hero_description")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"CTA 레이블"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",...x("hero_cta_label")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"CTA URL"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",...x("hero_cta_url")})]})]})})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>{const r=!_;U(r),localStorage.setItem("contactInfoExpanded",JSON.stringify(r))},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"연락처 카드"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"type/label/value/link/icon을 관리합니다. (type→아이콘 자동 매핑 가능)"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":_?"접기":"펼치기",children:_?e.jsx(j,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(w,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),_&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{type:"button",onClick:()=>c(r=>[...r,{id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,type:"",label:"",value:"",link:"",icon:"",display_order:r.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(I,{size:16})," 연락처 추가"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"type"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"label"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"value"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-64",children:"link"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"icon"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:h.map((r,a)=>e.jsxs(d.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsxs("select",{value:r.type,onChange:t=>{const s=t.target.value,l={email:"Mail",phone:"Phone",location:"MapPin",custom:r.icon??""},E=s==="custom"?r.icon??"":l[s]||"Mail",M=[...h];M[a]={...r,type:s,icon:E},c(M)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"타입 선택"}),e.jsx("option",{value:"email",children:"이메일"}),e.jsx("option",{value:"phone",children:"전화번호"}),e.jsx("option",{value:"location",children:"위치"}),e.jsx("option",{value:"custom",children:"커스텀"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.label??"",onChange:t=>{const s=[...h];s[a]={...r,label:t.target.value},c(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"이메일"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.value??"",onChange:t=>{const s=[...h];s[a]={...r,value:t.target.value},c(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"email@example.com"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.link??"",onChange:t=>{const s=[...h];s[a]={...r,link:t.target.value},c(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"mailto:email@example.com"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.icon??"",onChange:t=>{const s=[...h];s[a]={...r,icon:t.target.value},c(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"Mail/Phone/MapPin... (타입에 따라 자동 선택)"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{if(a===0)return;const t=[...h];[t[a-1],t[a]]=[t[a],t[a-1]],t.forEach((s,l)=>s.display_order=l),c(t)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>{if(a===h.length-1)return;const t=[...h];[t[a+1],t[a]]=[t[a],t[a+1]],t.forEach((s,l)=>s.display_order=l),c(t)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:async()=>{try{n(!0);const t={type:r.type.trim(),label:(r.label??"").trim()||null,value:(r.value??"").trim()||null,link:(r.link??"").trim()||null,icon:(r.icon??"").trim()||null,display_order:a};if(r.id.startsWith("local-")){const{error:l}=await o.from("contact_info").insert([t]);if(l)throw l}else{const{error:l}=await o.from("contact_info").update(t).eq("id",r.id);if(l)throw l}const{data:s}=await o.from("contact_info").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});c(s??[]),b("연락처가 저장되었습니다.")}catch(t){g(t.message||"저장 실패")}finally{n(!1)}},className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",children:"저장"}),e.jsxs("button",{type:"button",onClick:async()=>{if(!r.id.startsWith("local-"))try{n(!0);const{error:t}=await o.from("contact_info").delete().eq("id",r.id);if(t)throw t}catch(t){g(t.message||"삭제 실패")}finally{n(!1)}c(t=>t.filter((s,l)=>l!==a).map((s,l)=>({...s,display_order:l})))},className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:[e.jsx(O,{size:14})," 삭제"]})]})})]},`${r.id}-row1`),e.jsx("tr",{children:e.jsx("td",{className:"px-3 pb-4 pt-0",colSpan:7,children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"비고/설명은 필요 시 value에 포함하세요. type에 따라 아이콘 자동 매핑이 가능합니다."})})},`${r.id}-row2`)]},r.id))})]})})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>{const r=!v;W(r),localStorage.setItem("contactSocialsExpanded",JSON.stringify(r))},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"소셜 링크"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"플랫폼/URL/아이콘/색상(Tailwind 클래스) 관리"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":v?"접기":"펼치기",children:v?e.jsx(j,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(w,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),v&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{type:"button",onClick:()=>i(r=>[...r,{id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,name:"",url:"",icon:"",color:"",display_order:r.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(I,{size:16})," 소셜 추가"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"플랫폼"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-64",children:"URL"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"아이콘"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"색상 클래스"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.map((r,a)=>e.jsxs(d.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.name,onChange:t=>{const s=[...m];s[a]={...r,name:t.target.value},i(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"GitHub"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.url,onChange:t=>{const s=[...m];s[a]={...r,url:t.target.value},i(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"https://github.com/username"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.icon??"",onChange:t=>{const s=[...m];s[a]={...r,icon:t.target.value},i(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"Github/Linkedin/Twitter..."})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.color??"",onChange:t=>{const s=[...m];s[a]={...r,color:t.target.value},i(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"hover:bg-gray-900"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{if(a===0)return;const t=[...m];[t[a-1],t[a]]=[t[a],t[a-1]],t.forEach((s,l)=>s.display_order=l),i(t)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>{if(a===m.length-1)return;const t=[...m];[t[a+1],t[a]]=[t[a],t[a+1]],t.forEach((s,l)=>s.display_order=l),i(t)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:async()=>{try{n(!0);const t={name:r.name.trim(),url:r.url.trim(),icon:(r.icon??"").trim()||null,color:(r.color??"").trim()||null,display_order:a};if(r.id.startsWith("local-")){const{error:l}=await o.from("contact_socials").insert([t]);if(l)throw l}else{const{error:l}=await o.from("contact_socials").update(t).eq("id",r.id);if(l)throw l}const{data:s}=await o.from("contact_socials").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});i(s??[]),b("소셜 링크가 저장되었습니다.")}catch(t){g(t.message||"저장 실패")}finally{n(!1)}},className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",children:"저장"}),e.jsxs("button",{type:"button",onClick:async()=>{if(!r.id.startsWith("local-"))try{n(!0);const{error:t}=await o.from("contact_socials").delete().eq("id",r.id);if(t)throw t}catch(t){g(t.message||"삭제 실패")}finally{n(!1)}i(t=>t.filter((s,l)=>l!==a).map((s,l)=>({...s,display_order:l})))},className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:[e.jsx(O,{size:14})," 삭제"]})]})})]},`${r.id}-row1`),e.jsx("tr",{children:e.jsx("td",{className:"px-3 pb-4 pt-0",colSpan:6,children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"플랫폼에 맞는 색상 클래스를 Tailwind로 지정하세요. 예: hover:bg-gray-900, hover:bg-blue-700"})})},`${r.id}-row2`)]},r.id))})]})})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>{const r=!S;A(r),localStorage.setItem("contactHoursExpanded",JSON.stringify(r))},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"업무 가능 시간"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"라벨/시간/비고로 다건 관리"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":S?"접기":"펼치기",children:S?e.jsx(j,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(w,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),S&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{type:"button",onClick:()=>p(r=>[...r,{id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,label:"",time:"",note:"",display_order:r.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(I,{size:16})," 항목 추가"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-64",children:"라벨"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"시간"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"비고"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:y.map((r,a)=>e.jsxs(d.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.label,onChange:t=>{const s=[...y];s[a]={...r,label:t.target.value},p(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"월요일 - 금요일"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.time,onChange:t=>{const s=[...y];s[a]={...r,time:t.target.value},p(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"09:00 - 18:00"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.note??"",onChange:t=>{const s=[...y];s[a]={...r,note:t.target.value},p(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"* 긴급 문의는 언제든지 연락"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{if(a===0)return;const t=[...y];[t[a-1],t[a]]=[t[a],t[a-1]],t.forEach((s,l)=>s.display_order=l),p(t)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>{if(a===y.length-1)return;const t=[...y];[t[a+1],t[a]]=[t[a],t[a+1]],t.forEach((s,l)=>s.display_order=l),p(t)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:async()=>{try{n(!0);const t={label:r.label.trim(),time:r.time.trim(),note:(r.note??"").trim()||null,display_order:a};if(r.id.startsWith("local-")){const{error:l}=await o.from("contact_hours").insert([t]);if(l)throw l}else{const{error:l}=await o.from("contact_hours").update(t).eq("id",r.id);if(l)throw l}const{data:s}=await o.from("contact_hours").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});p(s??[]),b("업무 시간이 저장되었습니다.")}catch(t){g(t.message||"저장 실패")}finally{n(!1)}},className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",children:"저장"}),e.jsxs("button",{type:"button",onClick:async()=>{if(!r.id.startsWith("local-"))try{n(!0);const{error:t}=await o.from("contact_hours").delete().eq("id",r.id);if(t)throw t}catch(t){g(t.message||"삭제 실패")}finally{n(!1)}p(t=>t.filter((s,l)=>l!==a).map((s,l)=>({...s,display_order:l})))},className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:[e.jsx(O,{size:14})," 삭제"]})]})})]},`${r.id}-row1`),e.jsx("tr",{children:e.jsx("td",{className:"px-3 pb-4 pt-0",colSpan:5,children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"라벨/시간/비고는 자유 텍스트입니다."})})},`${r.id}-row2`)]},r.id))})]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:D,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(G,{size:16})," ",D?"저장 중...":"설정 저장"]})})]})})]})};export{ae as default};
