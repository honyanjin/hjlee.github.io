import{j as e,O,Q as $,m as r,V as N,W as f,r as w,Y as q,Z as o,v as n,w as v,J as A}from"./ui-E6zqGgdH.js";import{r as c,a as B}from"./router-CLvrYEWH.js";import{u as F,s as i}from"./index-BSxhl5io.js";import{B as J}from"./Breadcrumb-DhjgP5dH.js";import"./vendor-RGnvvjkK.js";const Z=()=>{const[s,k]=c.useState({totalPosts:0,publishedPosts:0,draftPosts:0,totalProjects:0,publishedProjects:0,featuredProjects:0,totalCategories:0,totalProjectCategories:0,totalComments:0,recentPosts:[],recentProjects:[],recentComments:[]}),[P,x]=c.useState(!0),[m,g]=c.useState(""),{signOut:C,user:M}=F(),a=B();c.useEffect(()=>{_()},[]);const _=async()=>{try{x(!0),g("");const{data:t,error:h}=await i.from("blog_posts").select("*").order("created_at",{ascending:!1});if(h)throw h;const{data:d,error:p}=await i.from("projects").select("*").order("created_at",{ascending:!1});if(p)throw p;const{data:S,error:j}=await i.from("categories").select("*");if(j)throw j;const{data:T,error:b}=await i.from("project_categories").select("*");if(b)throw b;const{data:u,error:y}=await i.from("comments").select("*").order("created_at",{ascending:!1});if(y)throw y;const D=t?.filter(l=>l.is_published)||[],E=t?.filter(l=>!l.is_published)||[],H=d?.filter(l=>l.is_published)||[],L=d?.filter(l=>l.featured)||[];k({totalPosts:t?.length||0,publishedPosts:D.length,draftPosts:E.length,totalProjects:d?.length||0,publishedProjects:H.length,featuredProjects:L.length,totalCategories:S?.length||0,totalProjectCategories:T?.length||0,totalComments:u?.length||0,recentPosts:t?.slice(0,5)||[],recentProjects:d?.slice(0,5)||[],recentComments:u?.slice(0,5)||[]})}catch(t){g("대시보드 데이터를 불러오는데 실패했습니다."),console.error("Error fetching dashboard data:",t)}finally{x(!1)}},z=async()=>{try{await C(),a("/")}catch(t){console.error("Sign out error:",t)}};return P?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{children:e.jsx(J,{items:[]})}),e.jsxs("div",{className:"flex justify-between items-center pb-6",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"관리자 대시보드"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>a("/"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx(O,{size:16}),"홈으로"]}),e.jsxs("button",{onClick:z,className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx($,{size:16}),"로그아웃"]})]})]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:m}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"핵심 관리 도구"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a("/admin/blog"),className:"flex items-center gap-3 p-6 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-lg",children:[e.jsx(N,{size:24}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"블로그 관리"}),e.jsx("div",{className:"text-sm opacity-90",children:"포스트 작성/편집"})]})]}),e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a("/admin/projects"),className:"flex items-center gap-3 p-6 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors shadow-lg",children:[e.jsx(f,{size:24}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"프로젝트 관리"}),e.jsx("div",{className:"text-sm opacity-90",children:"프로젝트 작성/편집"})]})]}),e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a("/admin/blog/categories"),className:"flex items-center gap-3 p-6 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-lg",children:[e.jsx(w,{size:24}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"포스트 카테고리"}),e.jsx("div",{className:"text-sm opacity-90",children:"포스트 분류/편집"})]})]}),e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a("/admin/projects/categories"),className:"flex items-center gap-3 p-6 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors shadow-lg",children:[e.jsx(q,{size:24}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"프로젝트 카테고리"}),e.jsx("div",{className:"text-sm opacity-90",children:"프로젝트 분류/편집"})]})]}),e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a("/admin/comments"),className:"flex items-center gap-3 p-6 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-colors shadow-lg",children:[e.jsx(o,{size:24}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"댓글 관리"}),e.jsx("div",{className:"text-sm opacity-90",children:"댓글 모니터링"})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"빠른 작업"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a("/admin/blog/new"),className:"flex items-center gap-3 p-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(n,{size:20}),e.jsx("span",{children:"새 포스트"})]}),e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a("/admin/projects/new"),className:"flex items-center gap-3 p-4 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[e.jsx(n,{size:20}),e.jsx("span",{children:"새 프로젝트"})]}),e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a("/admin/blog/categories?new=true"),className:"flex items-center gap-3 p-4 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(n,{size:20}),e.jsx("span",{children:"새 포스트 카테고리"})]}),e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a("/admin/projects/categories?new=true"),className:"flex items-center gap-3 p-4 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:[e.jsx(n,{size:20}),e.jsx("span",{children:"새 프로젝트 카테고리"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"통계"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"총 포스트"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.totalPosts})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-full",children:e.jsx(N,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]}),e.jsxs("div",{className:"mt-4 flex gap-2 text-sm",children:[e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["발행: ",s.publishedPosts]}),e.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:["임시저장: ",s.draftPosts]})]})]}),e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"총 프로젝트"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.totalProjects})]}),e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900 rounded-full",children:e.jsx(f,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})})]}),e.jsxs("div",{className:"mt-4 flex gap-2 text-sm",children:[e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["발행: ",s.publishedProjects]}),e.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:["대표: ",s.featuredProjects]})]})]}),e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"카테고리"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.totalCategories+s.totalProjectCategories})]}),e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900 rounded-full",children:e.jsx(w,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{className:"mt-4 flex gap-2 text-sm",children:[e.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["블로그: ",s.totalCategories]}),e.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:["프로젝트: ",s.totalProjectCategories]})]})]}),e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"총 댓글"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.totalComments})]}),e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900 rounded-full",children:e.jsx(o,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})})]}),e.jsx("div",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400",children:"최근 24시간 활동"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(r.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"최근 포스트"}),e.jsx("button",{onClick:()=>a("/admin/blog"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"모두 보기"})]})}),e.jsx("div",{className:"p-6",children:s.recentPosts.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"아직 포스트가 없습니다."}):e.jsx("div",{className:"space-y-4",children:s.recentPosts.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.is_published?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:t.is_published?"발행":"임시저장"}),e.jsx("button",{onClick:()=>a(`/admin/blog/edit/${t.id}`),className:"p-1 text-blue-600 hover:text-blue-700",children:e.jsx(v,{size:14})})]})]},t.id))})})]}),e.jsxs(r.div,{initial:{opacity:0,x:0},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"최근 프로젝트"}),e.jsx("button",{onClick:()=>a("/admin/projects"),className:"text-purple-600 hover:text-purple-700 text-sm font-medium",children:"모두 보기"})]})}),e.jsx("div",{className:"p-6",children:s.recentProjects.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"아직 프로젝트가 없습니다."}):e.jsx("div",{className:"space-y-4",children:s.recentProjects.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.featured&&e.jsx(A,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.is_published?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:t.is_published?"발행":"임시저장"}),e.jsx("button",{onClick:()=>a(`/admin/projects/edit/${t.id}`),className:"p-1 text-purple-600 hover:text-purple-700",children:e.jsx(v,{size:14})})]})]},t.id))})})]}),e.jsxs(r.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"최근 댓글"}),e.jsx("button",{onClick:()=>a("/admin/comments"),className:"text-pink-600 hover:text-pink-700 text-sm font-medium",children:"모두 보기"})]})}),e.jsx("div",{className:"p-6",children:s.recentComments.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"아직 댓글이 없습니다."}):e.jsx("div",{className:"space-y-4",children:s.recentComments.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:t.author_name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:t.content}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsx("button",{onClick:()=>a("/admin/comments"),className:"p-1 text-pink-600 hover:text-pink-700",children:e.jsx(o,{size:14})})]},t.id))})})]})]})]})]})};export{Z as default};
