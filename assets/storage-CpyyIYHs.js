import{s as c}from"./index-DjrO50vo.js";import"./ui-BLaX9ps4.js";import"./router-CLvrYEWH.js";import"./vendor-RGnvvjkK.js";const w=(e,t)=>{const{data:a}=c.storage.from(e).getPublicUrl(t);return a.publicUrl},d=e=>e.normalize("NFKC"),$=e=>{const a=(d(e).toLowerCase().replace(/\\/g,"/").split("/").pop()||"file").split("."),r=a.length>1?a.pop():"",n=(a.join(".")||"file").replace(/\s+/g,"-").replace(/[^a-z0-9._-]/g,"-").replace(/-+/g,"-").replace(/^\.+|\.+$/g,"").slice(0,60)||"file",i=(r||"").replace(/[^a-z0-9]/g,"").slice(0,10);return i?`${n}.${i}`:n},u=e=>{const t=d(e).replace(/\\/g,"/").replace(/\.+/g,".").replace(/\s+/g,"-").replace(/[^a-zA-Z0-9/_-]/g,"-").replace(/\/+/g,"/").replace(/^\/+|\/+$/g,"");return t===".."||t.includes("/../")||t.startsWith("../")||t.endsWith("/..")?"":t},z=async(e,t={})=>{const{limit:a=40,offset:r=0,sortBy:o}=t,n=u(t.prefix||""),{data:i,error:l}=await c.storage.from(e).list(n,{limit:a,offset:r,sortBy:o?{column:o.column,order:o.order}:{column:"name",order:"desc"}});if(l)throw l;return(i||[]).map(s=>{const p=w(e,n?`${n}/${s.name}`:s.name);return{name:n?`${n}/${s.name}`:s.name,id:s.id,updated_at:s.updated_at,created_at:s.created_at,last_accessed_at:s.last_accessed_at,metadata:s.metadata,publicUrl:p}})},x=async(e,t,a="")=>{const o=$(t.name).split("."),n=o.length>1?o.pop():"bin",i=(o.join(".")||"file").replace(/\s+/g,"-").replace(/[^a-z0-9._-]/g,"-").replace(/-+/g,"-"),l=Date.now().toString(36),g=Math.random().toString(36).slice(2,6),s=`${i}-${l}-${g}.${n}`,p=u(a),f=p?`${p}/${s}`:s,{error:m}=await c.storage.from(e).upload(f,t,{cacheControl:"3600",upsert:!1});if(m)throw m;return f},F=async(e,t)=>{const{error:a}=await c.storage.from(e).remove([t]);if(a)throw a},U=async(e,t,a)=>{const{error:r}=await c.storage.from(e).move(t,a);if(r)throw r},v=async(e,t,a)=>{const{error:r}=await c.storage.from(e).copy(t,a);if(r)throw r},N=e=>/(\.png|\.jpe?g|\.gif|\.webp|\.bmp|\.svg)$/i.test(e),P=async(e,t,a)=>{const{data:r,error:o}=await c.storage.from(e).createSignedUrl(t,a);if(o)throw o;return r.signedUrl};export{v as copyFile,P as createSignedUrl,w as getPublicUrl,N as isImage,z as listFiles,U as moveFile,F as removeFile,$ as sanitizeFileName,u as sanitizePrefix,x as uploadFile};
