const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/storage-st0zn75U.js","assets/index-DZNrztJB.js","assets/ui-BLaX9ps4.js","assets/router-CLvrYEWH.js","assets/vendor-RGnvvjkK.js","assets/index-2uY7pdez.css"])))=>i.map(i=>d[i]);
import{a as ce,b as ge,o as me,_ as R,s as c,c as U}from"./index-DZNrztJB.js";import{j as e,J as xe,K as I,C,a4 as he,v as pe,V as q,R as be,O as E,g as H,H as V,t as ye,B as _e,a5 as fe}from"./ui-BLaX9ps4.js";import{r as b}from"./router-CLvrYEWH.js";import{B as we}from"./Breadcrumb-DLoGhAph.js";import{R as ke}from"./RichTextEditor-aZyuJPiu.js";import{I as je,u as Ne}from"./ImageLibraryContext-BSHMHAaA.js";import"./vendor-RGnvvjkK.js";import"./storage-st0zn75U.js";const ve=me({show_about_me:U(),show_experience:U(),show_education:U(),show_skills:U()}),K={show_about_me:!0,show_experience:!0,show_education:!0,show_skills:!0},Se=()=>{const[Q,W]=b.useState(!0),[w,d]=b.useState(!1),[F,g]=b.useState(""),[J,x]=b.useState(""),[Ie,X]=b.useState(null),[o,m]=b.useState(null),[B,L]=b.useState(!1),[p,k]=b.useState([]),[_,j]=b.useState([]),[f,N]=b.useState([]),{open:G}=Ne(),[O,Y]=b.useState(()=>{const t=localStorage.getItem("adminSectionExpanded");return t!==null?JSON.parse(t):!0}),[D,Z]=b.useState(()=>{const t=localStorage.getItem("adminAboutMeExpanded");return t!==null?JSON.parse(t):!0}),[z,ee]=b.useState(()=>{const t=localStorage.getItem("adminSkillsExpanded");return t!==null?JSON.parse(t):!1}),[A,te]=b.useState(()=>{const t=localStorage.getItem("adminExperienceExpanded");return t!==null?JSON.parse(t):!1}),[$,re]=b.useState(()=>{const t=localStorage.getItem("adminEducationExpanded");return t!==null?JSON.parse(t):!1}),ae=()=>{const t=!O;Y(t),localStorage.setItem("adminSectionExpanded",JSON.stringify(t))},le=()=>{const t=!D;Z(t),localStorage.setItem("adminAboutMeExpanded",JSON.stringify(t))},se=()=>{const t=!z;ee(t),localStorage.setItem("adminSkillsExpanded",JSON.stringify(t))},ie=()=>{const t=!A;te(t),localStorage.setItem("adminExperienceExpanded",JSON.stringify(t))},ne=()=>{const t=!$;re(t),localStorage.setItem("adminEducationExpanded",JSON.stringify(t))},{register:M,handleSubmit:oe,reset:T,watch:de}=ce({resolver:ge(ve),defaultValues:K});b.useEffect(()=>{(async()=>{try{W(!0);const{data:r,error:a}=await c.from("about_page_settings").select("*").eq("id","default").maybeSingle();if(a)throw a;r?(X(r),T({show_about_me:r.show_about_me,show_experience:r.show_experience,show_education:r.show_education,show_skills:"show_skills"in r?r.show_skills:!0})):T(K);const{data:s,error:l}=await c.from("about_page_about_me").select("*").eq("id","default").maybeSingle();if(l)throw l;m(s??null);const{data:i,error:n}=await c.from("about_page_skills").select("*").order("category",{ascending:!0}).order("category_order",{ascending:!0});if(n)throw n;k(i??[]);const{data:u,error:h}=await c.from("about_page_experiences").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});if(h)throw h;j(u??[]);const{data:S,error:v}=await c.from("about_page_educations").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});if(v)throw v;N(S??[])}catch(r){g(r.message||"설정을 불러오지 못했습니다.")}finally{W(!1)}})()},[T]),b.useEffect(()=>{(async()=>{try{const{error:r}=await c.from("about_page_about_me").select("hero_subtitle").limit(1).maybeSingle();L(!r)}catch{L(!1)}})()},[]);const ue=async t=>{d(!0),g(""),x("");try{const r={id:"default",show_about_me:t.show_about_me,show_experience:t.show_experience,show_education:t.show_education,updated_at:new Date().toISOString(),show_skills:de("show_skills")},{error:a}=await c.from("about_page_settings").upsert(r,{onConflict:"id"});if(a)throw a;x("섹션 설정이 저장되었습니다.")}catch(r){g(r.message||"설정 저장에 실패했습니다.")}finally{d(!1)}};return e.jsxs("div",{className:"w-full",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx(we,{items:[{label:"페이지 관리",path:"/admin/pages/about"},{label:"About"}]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"About 페이지 관리"})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Q?e.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-300",children:[e.jsx(xe,{className:"h-5 w-5 animate-spin text-blue-600"}),"설정을 불러오는 중..."]}):e.jsxs("form",{onSubmit:oe(ue),className:"space-y-8",children:[F&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:F}),J&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-600 dark:text-green-400 px-4 py-3 rounded-md",children:J}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:ae,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"섹션 표시 설정"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"About 페이지의 각 섹션 표기 여부를 토글합니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":O?"접기":"펼치기",children:O?e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(C,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),O&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"About Me"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"상단 자기소개/프로필 영역"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...M("show_about_me")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"기술 스택"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"독립 섹션으로 표시"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...M("show_skills")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"경력 사항"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"이력/타임라인"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...M("show_experience")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"학력 사항"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"교육/학위"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...M("show_education")})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:le,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(he,{size:18})," About Me 요소 설정"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"프로필, 소개 텍스트, 버튼 등을 관리합니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":D?"접기":"펼치기",children:D?e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(C,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),D&&e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"서브타이틀 설정"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"서브타이틀 텍스트"}),e.jsx("input",{value:o?.hero_subtitle??"",onChange:t=>m(r=>r?{...r,hero_subtitle:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,hero_subtitle:t.target.value,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),placeholder:"예: 안녕하세요! 저는 사용자 경험을 중시하는 풀스택 개발자입니다. 깔끔하고 직관적인 웹 애플리케이션을 만드는 것을 좋아합니다.",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),!B&&e.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:"참고: 데이터베이스 컬럼(hero_subtitle)이 아직 없어 저장 시 이 필드는 무시됩니다. 컬럼 추가 후 자동으로 저장됩니다."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"기본 정보"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"이름"}),e.jsx("input",{defaultValue:o?.name??"",id:"aboutme-name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,name:t.target.value}:{id:"default",display_profile_image:!0,name:t.target.value,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"직함/타이틀"}),e.jsx("input",{defaultValue:o?.title??"",id:"aboutme-title",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,title:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:t.target.value,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"이메일"}),e.jsx("input",{defaultValue:o?.email??"",id:"aboutme-email",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,email:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:t.target.value,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"연락처(전화)"}),e.jsx("input",{defaultValue:o?.phone??"",id:"aboutme-phone",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,phone:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:t.target.value,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"위치"}),e.jsx("input",{defaultValue:o?.location??"",id:"aboutme-location",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,location:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:t.target.value,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"출생연도"}),e.jsx("input",{type:"number",defaultValue:o?.birth_year??"",id:"aboutme-birth",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,birth_year:t.target.value?Number(t.target.value):null}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:t.target.value?Number(t.target.value):null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o?.show_email??!0,onChange:t=>m(r=>r?{...r,show_email:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:t.target.checked,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"이메일 표시"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o?.show_phone??!0,onChange:t=>m(r=>r?{...r,show_phone:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:t.target.checked,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"연락처 표시"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o?.show_location??!0,onChange:t=>m(r=>r?{...r,show_location:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:t.target.checked,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"위치 표시"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o?.show_birth_year??!0,onChange:t=>m(r=>r?{...r,show_birth_year:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:t.target.checked,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"출생연도 표시"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"버튼/링크"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"이력서 버튼 레이블"}),e.jsx("input",{defaultValue:o?.resume_label??"이력서 다운로드",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,resume_label:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!0,resume_url:null,resume_label:t.target.value,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"이력서 URL"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{defaultValue:o?.resume_url??"",className:"w-full pl-9 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,resume_url:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!0,resume_url:t.target.value,resume_label:"이력서 다운로드",intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})}),e.jsx(pe,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-2",children:"이력서 파일 업로드 (zip, hwp, doc, docx, pdf)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:".zip,.hwp,.doc,.docx,.pdf,application/zip,application/x-hwp,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf",onChange:async t=>{const r=t.target.files?.[0];if(r)try{d(!0);const{uploadFile:a,getPublicUrl:s}=await R(async()=>{const{uploadFile:n,getPublicUrl:u}=await import("./storage-st0zn75U.js");return{uploadFile:n,getPublicUrl:u}},__vite__mapDeps([0,1,2,3,4,5])),l=await a("resume-files",r,""),i=s("resume-files",l);m(n=>n?{...n,resume_url:i}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!0,resume_url:i,resume_label:"이력서 다운로드",intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),x("이력서 파일이 업로드되었습니다.")}catch(a){g(a.message||"이력서 파일 업로드에 실패했습니다.")}finally{d(!1),t.currentTarget.value=""}},className:"block w-full text-sm text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/30 dark:file:text-blue-300"}),e.jsx(q,{size:18,className:"text-gray-400"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"업로드하면 URL 입력란이 자동으로 채워집니다."})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o?.show_resume_button??!1,onChange:t=>m(r=>r?{...r,show_resume_button:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:t.target.checked,resume_url:null,resume_label:"이력서 다운로드",intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"이력서 버튼 표시"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"소개 텍스트"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"소개 섹션 제목"}),e.jsx("input",{defaultValue:o?.intro_title??"자기소개",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,intro_title:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:t.target.value,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-2",children:"소개 내용 (리치 텍스트)"}),e.jsx(ke,{value:o?.intro_content_html??"",onChange:t=>m(r=>r?{...r,intro_content_html:t}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:t,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(be,{size:16})," 이미지"]}),e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"기본정보 카드 프로필 이미지"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"프로필 이미지 URL"}),e.jsx("input",{defaultValue:o?.profile_image_url??"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,profile_image_url:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:t.target.value,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-2",children:"프로필 이미지 업로드"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:async t=>{const r=t.target.files?.[0];if(r)try{d(!0);const{uploadFile:a,getPublicUrl:s}=await R(async()=>{const{uploadFile:n,getPublicUrl:u}=await import("./storage-st0zn75U.js");return{uploadFile:n,getPublicUrl:u}},__vite__mapDeps([0,1,2,3,4,5])),l=await a("admin-pic",r,"profile"),i=s("admin-pic",l);m(n=>n?{...n,profile_image_url:i}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:i,side_image_url:null,updated_at:new Date().toISOString()}),x("프로필 이미지가 업로드되었습니다.")}catch(a){g(a.message||"프로필 이미지 업로드에 실패했습니다.")}finally{d(!1),t.currentTarget.value=""}},className:"block w-full text-sm text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/30 dark:file:text-blue-300"}),e.jsx(q,{size:18,className:"text-gray-400"})]}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:async()=>{try{const t=await G({bucket:"admin-pic"});t&&(m(r=>r?{...r,profile_image_url:t}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:t,side_image_url:null,updated_at:new Date().toISOString()}),x("프로필 이미지가 선택되었습니다."))}catch(t){g(t.message||"이미지 선택에 실패했습니다.")}},className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600",children:"라이브러리에서 선택"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"업로드하거나 라이브러리에서 선택하면 URL 입력란이 자동으로 채워집니다."})]}),e.jsx("div",{children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o?.display_profile_image??!0,onChange:t=>m(r=>r?{...r,display_profile_image:t.target.checked}:{id:"default",display_profile_image:t.target.checked,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"프로필 이미지 표시"})]})})]})]}),e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"소개 카드 사이드 이미지"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"사이드 이미지 URL"}),e.jsx("input",{defaultValue:o?.side_image_url??"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,side_image_url:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:t.target.value,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-2",children:"사이드 이미지 업로드"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:async t=>{const r=t.target.files?.[0];if(r)try{d(!0);const{uploadFile:a,getPublicUrl:s}=await R(async()=>{const{uploadFile:n,getPublicUrl:u}=await import("./storage-st0zn75U.js");return{uploadFile:n,getPublicUrl:u}},__vite__mapDeps([0,1,2,3,4,5])),l=await a("admin-pic",r,"side"),i=s("admin-pic",l);m(n=>n?{...n,side_image_url:i}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:i,updated_at:new Date().toISOString()}),x("사이드 이미지가 업로드되었습니다.")}catch(a){g(a.message||"사이드 이미지 업로드에 실패했습니다.")}finally{d(!1),t.currentTarget.value=""}},className:"block w-full text-sm text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/30 dark:file:text-blue-300"}),e.jsx(q,{size:18,className:"text-gray-400"})]}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:async()=>{try{const t=await G({bucket:"admin-pic"});t&&(m(r=>r?{...r,side_image_url:t}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:t,updated_at:new Date().toISOString()}),x("사이드 이미지가 선택되었습니다."))}catch(t){g(t.message||"이미지 선택에 실패했습니다.")}},className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600",children:"라이브러리에서 선택"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"업로드하거나 라이브러리에서 선택하면 URL 입력란이 자동으로 채워집니다."})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"button",onClick:async()=>{try{d(!0),g(""),x("");const t={id:"default",display_profile_image:o?.display_profile_image??!0,name:o?.name??null,title:o?.title??null,email:o?.email??null,phone:o?.phone??null,location:o?.location??null,birth_year:o?.birth_year??null,show_email:o?.show_email??!0,show_phone:o?.show_phone??!0,show_location:o?.show_location??!0,show_birth_year:o?.show_birth_year??!0,show_resume_button:o?.show_resume_button??!1,resume_url:o?.resume_url??null,resume_label:o?.resume_label??null,...B?{hero_subtitle:o?.hero_subtitle??null}:{},intro_title:o?.intro_title??null,intro_content_html:o?.intro_content_html??null,profile_image_url:o?.profile_image_url??null,side_image_url:o?.side_image_url??null,updated_at:new Date().toISOString()},{error:r}=await c.from("about_page_about_me").upsert(t,{onConflict:"id"});if(r)throw r;x("About Me 설정이 저장되었습니다.")}catch(t){g(t.message||"About Me 설정 저장에 실패했습니다.")}finally{d(!1)}},disabled:w,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(E,{size:16}),w?"저장 중...":"About Me 설정 저장"]})})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:se,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(H,{size:18})," 기술 스택 요소 설정"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"기술 스택 섹션의 내용과 표시 방식을 관리합니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":z?"접기":"펼치기",children:z?e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(C,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),z&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"기술 스택 목록"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{type:"button",onClick:()=>{const t=prompt("새 분야명을 입력하세요 (예: Frontend, Backend, Database):","");if(t&&t.trim()){const a={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,category:t.trim(),skill_name:"",proficiency:50,display_order:p.length,category_order:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};k([...p,a])}},className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:[e.jsx(V,{size:16}),"분야 추가"]})})]}),p.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(H,{size:48,className:"mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("p",{children:"아직 등록된 기술 스택이 없습니다."}),e.jsx("p",{className:"text-sm mt-2",children:'"분야 추가" 버튼을 클릭하여 시작하세요.'})]}):(()=>{const t=p.reduce((a,s,l)=>(a[s.category]||(a[s.category]=[]),a[s.category].push({...s,originalIndex:l}),a),{});Object.keys(t).forEach(a=>{t[a].sort((s,l)=>{const i=s.category_order??s.display_order??0,n=l.category_order??l.display_order??0;return i-n})});const r=Object.keys(t).sort();return e.jsx("div",{className:"space-y-6",children:r.map(a=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",defaultValue:a,onBlur:async s=>{const l=s.target.value.trim();if(!l||l===a)return;const i=p.map(n=>n.category===a?{...n,category:l}:n);k(i);try{d(!0);const{error:n}=await c.from("about_page_skills").update({category:l}).eq("category",a);if(n)throw n;x(`분야명이 "${a}" → "${l}"(으)로 변경되었습니다.`)}catch(n){g(n.message||"분야명 변경 실패")}finally{d(!1)}},className:"text-lg font-semibold text-gray-900 dark:text-white bg-transparent border-b border-transparent focus:border-blue-500 focus:outline-none","aria-label":"분야명"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",t[a].length,"개)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>{const s=t[a]?.length??0,l={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,category:a,skill_name:"",proficiency:50,display_order:p.length,category_order:s,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};k([...p,l])},className:"inline-flex items-center gap-1 px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",title:`${a}에 기술 추가`,children:[e.jsx(V,{size:14}),"기술 추가"]}),e.jsxs("button",{type:"button",onClick:async()=>{if(confirm(`"${a}" 분야의 모든 기술을 삭제하시겠습니까?`)){const l=t[a].filter(n=>n.id&&!n.id.startsWith("local-"));for(const n of l)try{d(!0);const{error:u}=await c.from("about_page_skills").delete().eq("id",n.id);if(u){console.error("분야 삭제 오류:",u),g(`분야 삭제 실패: ${u.message}`);return}}catch(u){g(`분야 삭제 실패: ${u.message}`);return}const i=p.filter(n=>n.category!==a);i.forEach((n,u)=>{n.display_order=u}),k(i),x(`"${a}" 분야가 삭제되었습니다.`),d(!1)}},disabled:w,className:"inline-flex items-center gap-1 px-3 py-1 text-sm bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed",title:`${a} 분야 삭제`,children:[e.jsx(ye,{size:14}),"분야 삭제"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"기술명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"수준 (0-100)"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t[a].map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 align-middle",children:e.jsx("input",{type:"text",value:s.skill_name,onChange:l=>{const i=[...p];i[s.originalIndex]={...s,skill_name:l.target.value},k(i)},placeholder:"예: React",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2 align-middle",children:e.jsx("input",{type:"number",min:"0",max:"100",value:s.proficiency,onChange:l=>{const i=parseInt(l.target.value)||0,n=Math.max(0,Math.min(100,i)),u=[...p];u[s.originalIndex]={...s,proficiency:n},k(u)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2 align-middle",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{const l=t[a],i=l.findIndex(n=>n.id===s.id);if(i>0){const n=l[i].id,u=l[i-1].id,h=[...p],S=h.findIndex(y=>y.id===n),v=h.findIndex(y=>y.id===u);[h[v],h[S]]=[h[S],h[v]];let P=0;h.filter(y=>y.category===a).forEach(y=>{y.category_order=P++}),k(h)}},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500",title:"위로",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>{const l=t[a],i=l.findIndex(n=>n.id===s.id);if(i<l.length-1){const n=l[i].id,u=l[i+1].id,h=[...p],S=h.findIndex(y=>y.id===n),v=h.findIndex(y=>y.id===u);[h[v],h[S]]=[h[S],h[v]];let P=0;h.filter(y=>y.category===a).forEach(y=>{y.category_order=P++}),k(h)}},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500",title:"아래로",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2 align-middle",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:async()=>{try{d(!0);const l={category:s.category.trim(),skill_name:s.skill_name.trim(),proficiency:s.proficiency,category_order:s.category_order??0};if(s.id&&!s.id.startsWith("local-")){const{error:i}=await c.from("about_page_skills").update(l).eq("id",s.id);if(i)throw i}else{const{error:i}=await c.from("about_page_skills").insert([{...l,display_order:p.findIndex(n=>n.id===s.id)}]);if(i)throw i}x("기술이 저장되었습니다.")}catch(l){g(l.message||"저장 실패")}finally{d(!1)}},className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",title:"저장",children:"저장"}),e.jsx("button",{type:"button",onClick:async()=>{if(s.id&&!s.id.startsWith("local-"))try{d(!0);const{error:n}=await c.from("about_page_skills").delete().eq("id",s.id);if(n)throw n;x("기술 스택이 삭제되었습니다.")}catch(n){g(`삭제 실패: ${n.message}`);return}finally{d(!1)}const i=p.filter((n,u)=>u!==s.originalIndex);i.forEach((n,u)=>{n.display_order=u}),k(i)},disabled:w,className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",title:"삭제",children:"삭제"})]})})]},s.id))})]})})]},a))})})()]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("button",{type:"button",onClick:async()=>{try{d(!0),g(""),x("");const t=p.filter(l=>l.id.startsWith("local-")),r=p.filter(l=>!l.id.startsWith("local-"));if(t.length>0){const{error:l}=await c.from("about_page_skills").insert(t.map((i,n)=>({category:i.category.trim(),skill_name:i.skill_name.trim(),proficiency:i.proficiency,display_order:p.findIndex(u=>u===i),category_order:i.category_order??0})));if(l)throw console.error("Insert error:",l),l}for(const l of r){const{error:i}=await c.from("about_page_skills").update({category:l.category.trim(),skill_name:l.skill_name.trim(),proficiency:l.proficiency,display_order:p.findIndex(n=>n===l),category_order:l.category_order??0}).eq("id",l.id);if(i)throw console.error("Update error:",i),i}const{data:a,error:s}=await c.from("about_page_skills").select("*").order("display_order",{ascending:!0});s?console.error("Fetch error:",s):k(a??[]),x("기술 스택이 저장되었습니다.")}catch(t){console.error("Save error:",t),g(t.message||"기술 스택 저장에 실패했습니다.")}finally{d(!1)}},disabled:w||p.some(t=>!t.category.trim()||!t.skill_name.trim()),className:"inline-flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(E,{size:16}),w?"저장 중...":"기술 스택 저장"]})})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:ie,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(_e,{size:18})," 경력사항 요소 설정"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"경력사항 섹션의 내용과 타임라인을 관리합니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":A?"접기":"펼치기",children:A?e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(C,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),A&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"경력 목록"}),e.jsxs("button",{type:"button",onClick:()=>{const t={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,title:"",period:"",company:"",description:"",display_order:_.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};j(r=>[...r,t])},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(V,{size:16})," 경력 추가"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-64",children:"경력명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"경력기간"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"회사명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:_.map((t,r)=>e.jsxs(b.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:t.title,onChange:a=>{const s=[..._];s[r]={...t,title:a.target.value},j(s)},placeholder:"예: 풀스택 개발자",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:t.period,onChange:a=>{const s=[..._];s[r]={...t,period:a.target.value},j(s)},placeholder:"예: 2023 - 현재",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:t.company,onChange:a=>{const s=[..._];s[r]={...t,company:a.target.value},j(s)},placeholder:"예: Tech Company",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{if(r===0)return;const a=[..._];[a[r-1],a[r]]=[a[r],a[r-1]],a.forEach((s,l)=>s.display_order=l),j(a)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500",title:"위로",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>{if(r===_.length-1)return;const a=[..._];[a[r+1],a[r]]=[a[r],a[r+1]],a.forEach((s,l)=>s.display_order=l),j(a)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500",title:"아래로",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:async()=>{try{d(!0);const a={title:t.title.trim(),period:t.period.trim(),company:t.company.trim(),description:(t.description??"").trim()||null,display_order:r};if(t.id&&t.id.startsWith("local-")){const{error:i}=await c.from("about_page_experiences").insert([a]);if(i)throw i}else{const{error:i}=await c.from("about_page_experiences").update(a).eq("id",t.id);if(i)throw i}const{data:s,error:l}=await c.from("about_page_experiences").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});l||j(s??[]),x("경력이 저장되었습니다.")}catch(a){g(a.message||"경력 저장 실패")}finally{d(!1)}},className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",children:"저장"}),e.jsx("button",{type:"button",onClick:async()=>{if(t.id&&!t.id.startsWith("local-"))try{d(!0);const{error:a}=await c.from("about_page_experiences").delete().eq("id",t.id);if(a)throw a}catch(a){g(a.message||"삭제 실패")}finally{d(!1)}j(a=>a.filter((s,l)=>l!==r).map((s,l)=>({...s,display_order:l})))},className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:"삭제"})]})})]},`${t.id}-row1`),e.jsx("tr",{children:e.jsxs("td",{className:"px-3 pb-4 pt-0",colSpan:5,children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"경력설명"}),e.jsx("textarea",{value:t.description??"",onChange:a=>{const s=[..._];s[r]={...t,description:a.target.value},j(s)},placeholder:"간단한 역할/업무 설명",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})},`${t.id}-row2`)]},t.id))})]})}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("button",{type:"button",onClick:async()=>{try{d(!0),g(""),x("");const t=_.filter(l=>l.id.startsWith("local-"));if(t.length){const{error:l}=await c.from("about_page_experiences").insert(t.map((i,n)=>({title:i.title.trim(),period:i.period.trim(),company:i.company.trim(),description:(i.description??"").trim()||null,display_order:_.findIndex(u=>u===i)})));if(l)throw l}const r=_.filter(l=>!l.id.startsWith("local-"));for(const l of r){const{error:i}=await c.from("about_page_experiences").update({title:l.title.trim(),period:l.period.trim(),company:l.company.trim(),description:(l.description??"").trim()||null,display_order:_.findIndex(n=>n===l)}).eq("id",l.id);if(i)throw i}const{data:a,error:s}=await c.from("about_page_experiences").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});s||j(a??[]),x("경력 목록이 저장되었습니다.")}catch(t){g(t.message||"경력 저장 실패")}finally{d(!1)}},disabled:w||_.some(t=>!t.title.trim()||!t.period.trim()||!t.company.trim()),className:"inline-flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(E,{size:16})," ",w?"저장 중...":"경력 전체 저장"]})})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:ne,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(fe,{size:18})," 학력사항 요소 설정"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"학력사항 섹션의 내용과 표시 방식을 관리합니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":$?"접기":"펼치기",children:$?e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(C,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),$&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"학력 목록"}),e.jsxs("button",{type:"button",onClick:()=>{const t={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,degree:"",period:"",school:"",description:"",display_order:f.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};N(r=>[...r,t])},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(V,{size:16})," 학력 추가"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-64",children:"학위"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"기간"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"학교명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.map((t,r)=>e.jsxs(b.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:t.degree,onChange:a=>{const s=[...f];s[r]={...t,degree:a.target.value},N(s)},placeholder:"예: 컴퓨터공학 학사",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:t.period,onChange:a=>{const s=[...f];s[r]={...t,period:a.target.value},N(s)},placeholder:"예: 2017 - 2021",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:t.school,onChange:a=>{const s=[...f];s[r]={...t,school:a.target.value},N(s)},placeholder:"예: 한국대학교",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{if(r===0)return;const a=[...f];[a[r-1],a[r]]=[a[r],a[r-1]],a.forEach((s,l)=>s.display_order=l),N(a)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500",title:"위로",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>{if(r===f.length-1)return;const a=[...f];[a[r+1],a[r]]=[a[r],a[r+1]],a.forEach((s,l)=>s.display_order=l),N(a)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500",title:"아래로",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:async()=>{try{d(!0);const a={degree:t.degree.trim(),period:t.period.trim(),school:t.school.trim(),description:(t.description??"").trim()||null,display_order:r};if(t.id&&t.id.startsWith("local-")){const{error:i}=await c.from("about_page_educations").insert([a]);if(i)throw i}else{const{error:i}=await c.from("about_page_educations").update(a).eq("id",t.id);if(i)throw i}const{data:s,error:l}=await c.from("about_page_educations").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});l||N(s??[]),x("학력이 저장되었습니다.")}catch(a){g(a.message||"학력 저장 실패")}finally{d(!1)}},className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",children:"저장"}),e.jsx("button",{type:"button",onClick:async()=>{if(t.id&&!t.id.startsWith("local-"))try{d(!0);const{error:a}=await c.from("about_page_educations").delete().eq("id",t.id);if(a)throw a}catch(a){g(a.message||"삭제 실패")}finally{d(!1)}N(a=>a.filter((s,l)=>l!==r).map((s,l)=>({...s,display_order:l})))},className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:"삭제"})]})})]},`${t.id}-row1`),e.jsx("tr",{children:e.jsxs("td",{className:"px-3 pb-4 pt-0",colSpan:5,children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"상세 설명"}),e.jsx("textarea",{value:t.description??"",onChange:a=>{const s=[...f];s[r]={...t,description:a.target.value},N(s)},placeholder:"세부 학습 내용 등",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})},`${t.id}-row2`)]},t.id))})]})}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("button",{type:"button",onClick:async()=>{try{d(!0),g(""),x("");const t=f.filter(l=>l.id.startsWith("local-"));if(t.length){const{error:l}=await c.from("about_page_educations").insert(t.map((i,n)=>({degree:i.degree.trim(),period:i.period.trim(),school:i.school.trim(),description:(i.description??"").trim()||null,display_order:f.findIndex(u=>u===i)})));if(l)throw l}const r=f.filter(l=>!l.id.startsWith("local-"));for(const l of r){const{error:i}=await c.from("about_page_educations").update({degree:l.degree.trim(),period:l.period.trim(),school:l.school.trim(),description:(l.description??"").trim()||null,display_order:f.findIndex(n=>n===l)}).eq("id",l.id);if(i)throw i}const{data:a,error:s}=await c.from("about_page_educations").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});s||N(a??[]),x("학력 목록이 저장되었습니다.")}catch(t){g(t.message||"학력 저장 실패")}finally{d(!1)}},disabled:w||f.some(t=>!t.degree.trim()||!t.period.trim()||!t.school.trim()),className:"inline-flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(E,{size:16})," ",w?"저장 중...":"학력 전체 저장"]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:w,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(E,{size:16}),w?"저장 중...":"저장"]})})]})})]})},Ue=()=>e.jsx(je,{children:e.jsx(Se,{})});export{Ue as default};
