const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/storage-DrRvxGB9.js","assets/index-BpNejyj9.js","assets/ui-BzsjKXiP.js","assets/router-CLvrYEWH.js","assets/vendor-RGnvvjkK.js","assets/index-BQVRNoSP.css"])))=>i.map(i=>d[i]);
import{a as F,b as J,o as q,_ as k,s as y,c as f}from"./index-BpNejyj9.js";import{j as e,I as B,J as C,C as O,a3 as G,u as Q,R as j,Q as H,N as D}from"./ui-BzsjKXiP.js";import{r as d}from"./router-CLvrYEWH.js";import{B as K}from"./Breadcrumb-BfFqdkrC.js";import{R as W}from"./RichTextEditor-B8LA-l4A.js";import{I as X,u as Y}from"./ImageLibraryContext-BPyNFsTM.js";import"./vendor-RGnvvjkK.js";import"./storage-DrRvxGB9.js";const Z=q({show_about_me:f(),show_experience:f(),show_education:f(),show_skills:f()}),E={show_about_me:!0,show_experience:!0,show_education:!0,show_skills:!0},$=()=>{const[A,N]=d.useState(!0),[h,n]=d.useState(!1),[v,u]=d.useState(""),[S,o]=d.useState(""),[ee,U]=d.useState(null),[a,r]=d.useState(null),{open:I}=Y(),[b,L]=d.useState(()=>{const t=localStorage.getItem("adminSectionExpanded");return t!==null?JSON.parse(t):!0}),[x,z]=d.useState(()=>{const t=localStorage.getItem("adminAboutMeExpanded");return t!==null?JSON.parse(t):!0}),V=()=>{const t=!b;L(t),localStorage.setItem("adminSectionExpanded",JSON.stringify(t))},M=()=>{const t=!x;z(t),localStorage.setItem("adminAboutMeExpanded",JSON.stringify(t))},{register:p,handleSubmit:P,reset:w,watch:R}=F({resolver:J(Z),defaultValues:E});d.useEffect(()=>{(async()=>{try{N(!0);const{data:l,error:s}=await y.from("about_page_settings").select("*").eq("id","default").maybeSingle();if(s)throw s;l?(U(l),w({show_about_me:l.show_about_me,show_experience:l.show_experience,show_education:l.show_education,show_skills:"show_skills"in l?l.show_skills:!0})):w(E);const{data:_,error:m}=await y.from("about_page_about_me").select("*").eq("id","default").maybeSingle();if(m)throw m;r(_??null)}catch(l){u(l.message||"설정을 불러오지 못했습니다.")}finally{N(!1)}})()},[w]);const T=async t=>{n(!0),u(""),o("");try{const l={id:"default",show_about_me:t.show_about_me,show_experience:t.show_experience,show_education:t.show_education,updated_at:new Date().toISOString(),show_skills:R("show_skills")},{error:s}=await y.from("about_page_settings").upsert(l,{onConflict:"id"});if(s)throw s;o("섹션 설정이 저장되었습니다.")}catch(l){u(l.message||"설정 저장에 실패했습니다.")}finally{n(!1)}};return e.jsxs("div",{className:"w-full",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx(K,{items:[{label:"페이지 관리",path:"/admin/pages/about"},{label:"About"}]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"About 페이지 관리"})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:A?e.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-300",children:[e.jsx(B,{className:"h-5 w-5 animate-spin text-blue-600"}),"설정을 불러오는 중..."]}):e.jsxs("form",{onSubmit:P(T),className:"space-y-8",children:[v&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:v}),S&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-600 dark:text-green-400 px-4 py-3 rounded-md",children:S}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:V,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"섹션 표시 설정"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"About 페이지의 각 섹션 표기 여부를 토글합니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":b?"접기":"펼치기",children:b?e.jsx(C,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(O,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),b&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"About Me"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"상단 자기소개/프로필 영역"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...p("show_about_me")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"경력 사항"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"이력/타임라인"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...p("show_experience")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"학력 사항"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"교육/학위"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...p("show_education")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"기술 스택"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"독립 섹션으로 표시"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...p("show_skills")})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:M,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(G,{size:18})," About Me 요소 설정"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"프로필, 소개 텍스트, 버튼 등을 관리합니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":x?"접기":"펼치기",children:x?e.jsx(C,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(O,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),x&&e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"기본 정보"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"이름"}),e.jsx("input",{defaultValue:a?.name??"",id:"aboutme-name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>r(l=>l?{...l,name:t.target.value}:{id:"default",display_profile_image:!0,name:t.target.value,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"직함/타이틀"}),e.jsx("input",{defaultValue:a?.title??"",id:"aboutme-title",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>r(l=>l?{...l,title:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:t.target.value,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"이메일"}),e.jsx("input",{defaultValue:a?.email??"",id:"aboutme-email",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>r(l=>l?{...l,email:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:t.target.value,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"연락처(전화)"}),e.jsx("input",{defaultValue:a?.phone??"",id:"aboutme-phone",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>r(l=>l?{...l,phone:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:t.target.value,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"위치"}),e.jsx("input",{defaultValue:a?.location??"",id:"aboutme-location",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>r(l=>l?{...l,location:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:t.target.value,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"출생연도"}),e.jsx("input",{type:"number",defaultValue:a?.birth_year??"",id:"aboutme-birth",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>r(l=>l?{...l,birth_year:t.target.value?Number(t.target.value):null}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:t.target.value?Number(t.target.value):null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a?.show_email??!0,onChange:t=>r(l=>l?{...l,show_email:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:t.target.checked,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"이메일 표시"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a?.show_phone??!0,onChange:t=>r(l=>l?{...l,show_phone:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:t.target.checked,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"연락처 표시"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a?.show_location??!0,onChange:t=>r(l=>l?{...l,show_location:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:t.target.checked,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"위치 표시"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a?.show_birth_year??!0,onChange:t=>r(l=>l?{...l,show_birth_year:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:t.target.checked,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"출생연도 표시"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"버튼/링크"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"이력서 버튼 레이블"}),e.jsx("input",{defaultValue:a?.resume_label??"이력서 다운로드",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>r(l=>l?{...l,resume_label:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!0,resume_url:null,resume_label:t.target.value,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"이력서 URL"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{defaultValue:a?.resume_url??"",className:"w-full pl-9 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>r(l=>l?{...l,resume_url:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!0,resume_url:t.target.value,resume_label:"이력서 다운로드",intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})}),e.jsx(Q,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-2",children:"이력서 파일 업로드 (zip, hwp, doc, docx, pdf)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:".zip,.hwp,.doc,.docx,.pdf,application/zip,application/x-hwp,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf",onChange:async t=>{const l=t.target.files?.[0];if(l)try{n(!0);const{uploadFile:s,getPublicUrl:_}=await k(async()=>{const{uploadFile:i,getPublicUrl:g}=await import("./storage-DrRvxGB9.js");return{uploadFile:i,getPublicUrl:g}},__vite__mapDeps([0,1,2,3,4,5])),m=await s("resume-files",l,""),c=_("resume-files",m);r(i=>i?{...i,resume_url:c}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!0,resume_url:c,resume_label:"이력서 다운로드",intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),o("이력서 파일이 업로드되었습니다.")}catch(s){u(s.message||"이력서 파일 업로드에 실패했습니다.")}finally{n(!1),t.currentTarget.value=""}},className:"block w-full text-sm text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/30 dark:file:text-blue-300"}),e.jsx(j,{size:18,className:"text-gray-400"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"업로드하면 URL 입력란이 자동으로 채워집니다."})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a?.show_resume_button??!1,onChange:t=>r(l=>l?{...l,show_resume_button:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:t.target.checked,resume_url:null,resume_label:"이력서 다운로드",intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"이력서 버튼 표시"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"소개 텍스트"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"소개 섹션 제목"}),e.jsx("input",{defaultValue:a?.intro_title??"자기소개",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>r(l=>l?{...l,intro_title:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:t.target.value,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-2",children:"소개 내용 (리치 텍스트)"}),e.jsx(W,{value:a?.intro_content_html??"",onChange:t=>r(l=>l?{...l,intro_content_html:t}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:t,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(H,{size:16})," 이미지"]}),e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"기본정보 카드 프로필 이미지"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"프로필 이미지 URL"}),e.jsx("input",{defaultValue:a?.profile_image_url??"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>r(l=>l?{...l,profile_image_url:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:t.target.value,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-2",children:"프로필 이미지 업로드"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:async t=>{const l=t.target.files?.[0];if(l)try{n(!0);const{uploadFile:s,getPublicUrl:_}=await k(async()=>{const{uploadFile:i,getPublicUrl:g}=await import("./storage-DrRvxGB9.js");return{uploadFile:i,getPublicUrl:g}},__vite__mapDeps([0,1,2,3,4,5])),m=await s("admin-pic",l,"profile"),c=_("admin-pic",m);r(i=>i?{...i,profile_image_url:c}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:c,side_image_url:null,updated_at:new Date().toISOString()}),o("프로필 이미지가 업로드되었습니다.")}catch(s){u(s.message||"프로필 이미지 업로드에 실패했습니다.")}finally{n(!1),t.currentTarget.value=""}},className:"block w-full text-sm text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/30 dark:file:text-blue-300"}),e.jsx(j,{size:18,className:"text-gray-400"})]}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:async()=>{try{const t=await I({bucket:"admin-pic"});t&&(r(l=>l?{...l,profile_image_url:t}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:t,side_image_url:null,updated_at:new Date().toISOString()}),o("프로필 이미지가 선택되었습니다."))}catch(t){u(t.message||"이미지 선택에 실패했습니다.")}},className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600",children:"라이브러리에서 선택"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"업로드하거나 라이브러리에서 선택하면 URL 입력란이 자동으로 채워집니다."})]}),e.jsx("div",{children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a?.display_profile_image??!0,onChange:t=>r(l=>l?{...l,display_profile_image:t.target.checked}:{id:"default",display_profile_image:t.target.checked,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"프로필 이미지 표시"})]})})]})]}),e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"소개 카드 사이드 이미지"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"사이드 이미지 URL"}),e.jsx("input",{defaultValue:a?.side_image_url??"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>r(l=>l?{...l,side_image_url:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:t.target.value,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-2",children:"사이드 이미지 업로드"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:async t=>{const l=t.target.files?.[0];if(l)try{n(!0);const{uploadFile:s,getPublicUrl:_}=await k(async()=>{const{uploadFile:i,getPublicUrl:g}=await import("./storage-DrRvxGB9.js");return{uploadFile:i,getPublicUrl:g}},__vite__mapDeps([0,1,2,3,4,5])),m=await s("admin-pic",l,"side"),c=_("admin-pic",m);r(i=>i?{...i,side_image_url:c}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:c,updated_at:new Date().toISOString()}),o("사이드 이미지가 업로드되었습니다.")}catch(s){u(s.message||"사이드 이미지 업로드에 실패했습니다.")}finally{n(!1),t.currentTarget.value=""}},className:"block w-full text-sm text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/30 dark:file:text-blue-300"}),e.jsx(j,{size:18,className:"text-gray-400"})]}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:async()=>{try{const t=await I({bucket:"admin-pic"});t&&(r(l=>l?{...l,side_image_url:t}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:t,updated_at:new Date().toISOString()}),o("사이드 이미지가 선택되었습니다."))}catch(t){u(t.message||"이미지 선택에 실패했습니다.")}},className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600",children:"라이브러리에서 선택"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"업로드하거나 라이브러리에서 선택하면 URL 입력란이 자동으로 채워집니다."})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"button",onClick:async()=>{try{n(!0),u(""),o("");const t={id:"default",display_profile_image:a?.display_profile_image??!0,name:a?.name??null,title:a?.title??null,email:a?.email??null,phone:a?.phone??null,location:a?.location??null,birth_year:a?.birth_year??null,show_email:a?.show_email??!0,show_phone:a?.show_phone??!0,show_location:a?.show_location??!0,show_birth_year:a?.show_birth_year??!0,show_resume_button:a?.show_resume_button??!1,resume_url:a?.resume_url??null,resume_label:a?.resume_label??null,intro_title:a?.intro_title??null,intro_content_html:a?.intro_content_html??null,profile_image_url:a?.profile_image_url??null,side_image_url:a?.side_image_url??null,updated_at:new Date().toISOString()},{error:l}=await y.from("about_page_about_me").upsert(t,{onConflict:"id"});if(l)throw l;o("About Me 설정이 저장되었습니다.")}catch(t){u(t.message||"About Me 설정 저장에 실패했습니다.")}finally{n(!1)}},disabled:h,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(D,{size:16}),h?"저장 중...":"About Me 설정 저장"]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:h,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(D,{size:16}),h?"저장 중...":"저장"]})})]})})]})},oe=()=>e.jsx(X,{children:e.jsx($,{})});export{oe as default};
