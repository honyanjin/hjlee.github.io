import{j as e,Y as D,C as F,a0 as M,Q as O,I as q,k as ee,X as re,g as H,F as te}from"./ui-DZss5j7o.js";import{r as c}from"./router-CLvrYEWH.js";import{a as K,b as Q,o as T,f as S,s as w,I as ae,A as V,c as v,n as se,l as le}from"./index-D65f1dRP.js";import{A as de}from"./AdminPageHeader-CBcrBf_d.js";import{R as ie}from"./RichTextEditor-CTpYoa8s.js";import{I as Y}from"./ImageUpload-Dtlo88vX.js";import"./vendor-RGnvvjkK.js";const ne=T({show_about_me:S(),show_experience:S(),show_education:S(),show_skills:S()}),oe=({settings:y,onSave:f,isSaving:u})=>{const[i,j]=c.useState(!0),{register:a,handleSubmit:x,formState:{errors:m}}=K({resolver:Q(ne),defaultValues:{show_about_me:y.show_about_me,show_experience:y.show_experience,show_education:y.show_education,show_skills:y.show_skills||!0}}),g=async N=>{await f(N)};return e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>j(!i),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"기본 설정"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"페이지 섹션 표시 여부 설정"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":i?"접기":"펼치기",children:i?e.jsx(D,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(F,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),i&&e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:x(g),className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...a("show_about_me"),type:"checkbox",id:"show_about_me",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"show_about_me",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"About Me 섹션 표시"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...a("show_experience"),type:"checkbox",id:"show_experience",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"show_experience",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"경력 섹션 표시"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...a("show_education"),type:"checkbox",id:"show_education",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"show_education",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"학력 섹션 표시"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...a("show_skills"),type:"checkbox",id:"show_skills",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"show_skills",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"스킬 섹션 표시"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:u,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(M,{size:16}),u?"저장 중...":"설정 저장"]})})]})})]})},ce=({skills:y,onSaveSkills:f,isSaving:u})=>{const[i,j]=c.useState(!0),[a,x]=c.useState(y),m=()=>{const r={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,category:"",skill_name:"",proficiency:50,display_order:a.length,category_order:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};x([...a,r])},g=(r,l,t)=>{const o=[...a];o[r]={...o[r],[l]:t},x(o)},N=r=>{x(a.filter((l,t)=>t!==r))},b=(r,l)=>{if(l==="up"&&r===0||l==="down"&&r===a.length-1)return;const t=[...a],o=l==="up"?r-1:r+1;[t[r],t[o]]=[t[o],t[r]],t.forEach((E,C)=>{E.display_order=C}),x(t)},k=async()=>{await f(a)};return e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>j(!i),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"스킬 관리"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"카테고리/스킬명/숙련도로 다건 관리"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":i?"접기":"펼치기",children:i?e.jsx(D,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(F,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),i&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{type:"button",onClick:m,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(O,{size:16}),"스킬 추가"]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["💡 ",e.jsx("strong",{children:"입력 안내:"})," 카테고리/스킬명은 자유 텍스트, 숙련도는 0-100% 슬라이더로 설정"]})}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"카테고리"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"스킬명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"숙련도"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:a.map((r,l)=>e.jsx(c.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>b(l,"up"),className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>b(l,"down"),className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.category,onChange:t=>g(l,"category",t.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: Frontend"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.skill_name,onChange:t=>g(l,"skill_name",t.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: React"})}),e.jsxs("td",{className:"px-3 py-2",children:[e.jsx("input",{type:"range",min:"0",max:"100",value:r.proficiency,onChange:t=>g(l,"proficiency",parseInt(t.target.value)),className:"w-full"}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:[r.proficiency,"%"]})]}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("div",{className:"inline-flex gap-2",children:e.jsx("button",{type:"button",onClick:()=>N(l),className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:e.jsx(q,{size:14})})})})]})},r.id))})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("button",{type:"button",onClick:k,disabled:u||a.some(r=>!r.category.trim()||!r.skill_name.trim()),className:"inline-flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(M,{size:16}),u?"저장 중...":"스킬 전체 저장"]})})]})]})},xe=({experiences:y,onSaveExperiences:f,isSaving:u})=>{const[i,j]=c.useState(!0),[a,x]=c.useState(y),m=()=>{const r={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,title:"",period:"",company:"",description:"",display_order:a.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};x([...a,r])},g=(r,l,t)=>{const o=[...a];o[r]={...o[r],[l]:t},x(o)},N=r=>{x(a.filter((l,t)=>t!==r))},b=(r,l)=>{if(l==="up"&&r===0||l==="down"&&r===a.length-1)return;const t=[...a],o=l==="up"?r-1:r+1;[t[r],t[o]]=[t[o],t[r]],t.forEach((E,C)=>{E.display_order=C}),x(t)},k=async()=>{await f(a)};return e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>j(!i),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"경력 관리"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"직책/기간/회사/설명으로 다건 관리"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":i?"접기":"펼치기",children:i?e.jsx(D,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(F,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),i&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{type:"button",onClick:m,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(O,{size:16}),"경력 추가"]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["💡 ",e.jsx("strong",{children:"입력 안내:"})," 직책/기간/회사/설명은 자유 텍스트입니다."]})}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"직책"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"기간"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"회사"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"설명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:a.map((r,l)=>e.jsx(c.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>b(l,"up"),className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>b(l,"down"),className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.title,onChange:t=>g(l,"title",t.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: Frontend Developer"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.period,onChange:t=>g(l,"period",t.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: 2022.01 - 2023.12"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.company,onChange:t=>g(l,"company",t.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: ABC Company"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("textarea",{value:r.description||"",onChange:t=>g(l,"description",t.target.value),rows:2,className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"주요 업무 내용 등"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("div",{className:"inline-flex gap-2",children:e.jsx("button",{type:"button",onClick:()=>N(l),className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:e.jsx(q,{size:14})})})})]})},r.id))})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("button",{type:"button",onClick:k,disabled:u||a.some(r=>!r.title.trim()||!r.period.trim()||!r.company.trim()),className:"inline-flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(M,{size:16}),u?"저장 중...":"경력 전체 저장"]})})]})]})},ge=({educations:y,onSaveEducations:f,isSaving:u})=>{const[i,j]=c.useState(!0),[a,x]=c.useState(y),m=()=>{const r={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,degree:"",period:"",school:"",description:"",display_order:a.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};x([...a,r])},g=(r,l,t)=>{const o=[...a];o[r]={...o[r],[l]:t},x(o)},N=r=>{x(a.filter((l,t)=>t!==r))},b=(r,l)=>{if(l==="up"&&r===0||l==="down"&&r===a.length-1)return;const t=[...a],o=l==="up"?r-1:r+1;[t[r],t[o]]=[t[o],t[r]],t.forEach((E,C)=>{E.display_order=C}),x(t)},k=async()=>{await f(a)};return e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>j(!i),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"학력 관리"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"학위/기간/학교/설명으로 다건 관리"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":i?"접기":"펼치기",children:i?e.jsx(D,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(F,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),i&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{type:"button",onClick:m,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(O,{size:16}),"학력 추가"]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["💡 ",e.jsx("strong",{children:"입력 안내:"})," 학위/기간/학교/설명은 자유 텍스트입니다."]})}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"학위"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"기간"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"학교"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"설명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:a.map((r,l)=>e.jsx(c.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>b(l,"up"),className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>b(l,"down"),className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.degree,onChange:t=>g(l,"degree",t.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: 컴퓨터공학 학사"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.period,onChange:t=>g(l,"period",t.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: 2018.03 - 2022.02"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:r.school,onChange:t=>g(l,"school",t.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: ABC University"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("textarea",{value:r.description||"",onChange:t=>g(l,"description",t.target.value),rows:2,className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"세부 학습 내용 등"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("div",{className:"inline-flex gap-2",children:e.jsx("button",{type:"button",onClick:()=>N(l),className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:e.jsx(q,{size:14})})})})]})},r.id))})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("button",{type:"button",onClick:k,disabled:u||a.some(r=>!r.degree.trim()||!r.period.trim()||!r.school.trim()),className:"inline-flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(M,{size:16}),u?"저장 중...":"학력 전체 저장"]})})]})]})},ue=({onFileUpload:y,currentFile:f,className:u="",bucketName:i="resume-files",acceptedTypes:j=[".pdf",".doc",".docx",".hwp",".zip"],maxSize:a=10})=>{const[x,m]=c.useState(!1),[g,N]=c.useState(!1),[b,k]=c.useState(""),r=c.useRef(null),l=async n=>{if(!n)return;if(n.size>a*1024*1024){k(`파일 크기는 ${a}MB 이하여야 합니다.`);return}const _="."+n.name.split(".").pop()?.toLowerCase();if(!j.includes(_)){k(`지원하지 않는 파일 형식입니다. 지원 형식: ${j.join(", ")}`);return}try{m(!0),k("");const p=_,A=`${(n.name.split(".").slice(0,-1).join(".")||"file").normalize("NFKC").toLowerCase().replace(/[^a-z0-9._-]/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"").slice(0,60)||"file"}-${Date.now().toString(36)}${p}`,{error:R}=await w.storage.from(i).upload(A,n,{cacheControl:"3600",upsert:!1});if(R)throw R;const{data:I}=w.storage.from(i).getPublicUrl(A);y(I.publicUrl)}catch(p){k(p.message||"파일 업로드에 실패했습니다.")}finally{m(!1)}},t=n=>{const _=n.target.files?.[0];_&&l(_)},o=n=>{n.preventDefault(),n.stopPropagation(),n.type==="dragenter"||n.type==="dragover"?N(!0):n.type==="dragleave"&&N(!1)},E=n=>{n.preventDefault(),n.stopPropagation(),N(!1);const _=n.dataTransfer.files?.[0];_&&l(_)},C=()=>{y("")},z=n=>{switch(n.split(".").pop()?.toLowerCase()){case"pdf":return"📄";case"doc":case"docx":return"📝";case"hwp":return"📋";case"zip":return"📦";default:return"📎"}},U=n=>{try{const p=new URL(n).pathname.split("/");return p[p.length-1]||"파일"}catch{return"파일"}};return e.jsxs("div",{className:`space-y-4 ${u}`,children:[b&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:b}),f?e.jsx("div",{className:"space-y-3",children:e.jsx("div",{className:"relative bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:z(f)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:U(f)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"문서 파일"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",title:"파일 다운로드",children:e.jsx(ee,{size:16})}),e.jsx("button",{type:"button",onClick:C,className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",title:"파일 제거",children:e.jsx(re,{size:16})})]})]})})}):e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${g?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,onDragEnter:o,onDragLeave:o,onDragOver:o,onDrop:E,children:[e.jsx("input",{ref:r,type:"file",accept:j.join(","),onChange:t,className:"hidden"}),x?e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(H,{className:"h-8 w-8 text-blue-600 animate-spin"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"파일 업로드 중..."})]}):e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-full",children:e.jsx(te,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"파일을 드래그하여 업로드하거나"}),e.jsx("button",{type:"button",onClick:()=>r.current?.click(),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"파일 선택"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["지원 형식: ",j.join(", ")," (최대 ",a,"MB)"]})]})]})]})},me=T({display_profile_image:S(),name:v().min(1,"이름을 입력하세요"),title:v().min(1,"직책을 입력하세요"),email:v().email("올바른 이메일을 입력하세요"),phone:v().optional(),location:v().min(1,"위치를 입력하세요"),birth_year:se().min(1900,"올바른 출생년도를 입력하세요").max(new Date().getFullYear(),"올바른 출생년도를 입력하세요"),show_email:S(),show_phone:S(),show_location:S(),show_birth_year:S(),show_resume_button:S(),resume_url:v().url("올바른 URL을 입력하세요").optional().or(le("")),resume_label:v().optional(),intro_title:v().min(1,"소개 제목을 입력하세요"),intro_content_html:v().min(1,"소개 내용을 입력하세요"),profile_image_url:v().optional(),side_image_url:v().optional()}),pe=()=>{const[y,f]=c.useState(!0),[u,i]=c.useState(!1),[j,a]=c.useState(""),[x,m]=c.useState(""),[g,N]=c.useState(null),[b,k]=c.useState(null),[r,l]=c.useState([]),[t,o]=c.useState([]),[E,C]=c.useState([]),[z,U]=c.useState(!0),{register:n,handleSubmit:_,formState:{errors:p},reset:B,setValue:A,watch:R}=K({resolver:Q(me)});c.useEffect(()=>{I()},[]);const I=async()=>{try{f(!0),a("");const[s,d,L,$,P]=await Promise.allSettled([w.from("about_page_settings").select("*").eq("id","default").maybeSingle(),w.from("about_page_about_me").select("*").eq("id","default").maybeSingle(),w.from("about_page_skills").select("*").order("category",{ascending:!0}).order("category_order",{ascending:!0}),w.from("about_page_experiences").select("*").order("display_order",{ascending:!0}),w.from("about_page_educations").select("*").order("display_order",{ascending:!0})]);if(s.status==="fulfilled"&&s.value.data&&N(s.value.data),d.status==="fulfilled"&&d.value.data){const h=d.value.data;k(h),B({display_profile_image:h.display_profile_image,name:h.name||"",title:h.title||"",email:h.email||"",phone:h.phone||"",location:h.location||"",birth_year:h.birth_year||1990,show_email:h.show_email,show_phone:h.show_phone||!1,show_location:h.show_location,show_birth_year:h.show_birth_year,show_resume_button:h.show_resume_button,resume_url:h.resume_url||"",resume_label:h.resume_label||"",intro_title:h.intro_title||"",intro_content_html:h.intro_content_html||"",profile_image_url:h.profile_image_url||"",side_image_url:h.side_image_url||""})}L.status==="fulfilled"&&L.value.data&&l(L.value.data),$.status==="fulfilled"&&$.value.data&&o($.value.data),P.status==="fulfilled"&&P.value.data&&C(P.value.data)}catch(s){a("데이터를 불러오는데 실패했습니다."),console.error("Error loading data:",s)}finally{f(!1)}},X=async s=>{try{i(!0),a(""),m("");const{error:d}=await w.from("about_page_about_me").update({display_profile_image:s.display_profile_image,name:s.name,title:s.title,email:s.email,phone:s.phone,location:s.location,birth_year:s.birth_year,show_email:s.show_email,show_phone:s.show_phone,show_location:s.show_location,show_birth_year:s.show_birth_year,show_resume_button:s.show_resume_button,resume_url:s.resume_url||null,resume_label:s.resume_label,intro_title:s.intro_title,intro_content_html:s.intro_content_html,profile_image_url:s.profile_image_url||null,side_image_url:s.side_image_url||null,updated_at:new Date().toISOString()}).eq("id",b?.id);if(d)throw d;m("About Me 설정이 저장되었습니다."),await I()}catch(d){a("설정 저장에 실패했습니다."),console.error("Error saving about me settings:",d)}finally{i(!1)}},G=async s=>{try{i(!0),a(""),m("");const{error:d}=await w.from("about_page_settings").update({show_about_me:s.show_about_me,show_experience:s.show_experience,show_education:s.show_education,show_skills:s.show_skills,updated_at:new Date().toISOString()}).eq("id",g?.id);if(d)throw d;m("페이지 설정이 저장되었습니다."),await I()}catch(d){a("설정 저장에 실패했습니다."),console.error("Error saving page settings:",d)}finally{i(!1)}},J=async s=>{try{if(i(!0),a(""),m(""),await w.from("about_page_skills").delete().neq("id","00000000-0000-0000-0000-000000000000"),s.length>0){const{error:d}=await w.from("about_page_skills").insert(s);if(d)throw d}m("스킬이 저장되었습니다."),await I()}catch(d){a("스킬 저장에 실패했습니다."),console.error("Error saving skills:",d)}finally{i(!1)}},W=async s=>{try{if(i(!0),a(""),m(""),await w.from("about_page_experiences").delete().neq("id","00000000-0000-0000-0000-000000000000"),s.length>0){const{error:d}=await w.from("about_page_experiences").insert(s);if(d)throw d}m("경력이 저장되었습니다."),await I()}catch(d){a("경력 저장에 실패했습니다."),console.error("Error saving experiences:",d)}finally{i(!1)}},Z=async s=>{try{if(i(!0),a(""),m(""),await w.from("about_page_educations").delete().neq("id","00000000-0000-0000-0000-000000000000"),s.length>0){const{error:d}=await w.from("about_page_educations").insert(s);if(d)throw d}m("학력이 저장되었습니다."),await I()}catch(d){a("학력 저장에 실패했습니다."),console.error("Error saving educations:",d)}finally{i(!1)}};return y?e.jsx(V,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"animate-spin h-8 w-8 text-blue-600"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"데이터를 불러오는 중..."})]})})}):e.jsx(V,{children:e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsx(de,{title:"About 페이지 관리",description:"About 페이지의 모든 설정과 콘텐츠를 관리합니다."}),j&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:j}),x&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-600 dark:text-green-400 px-4 py-3 rounded-md",children:x}),g&&e.jsx(oe,{settings:g,onSave:G,isSaving:u}),b&&e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>U(!z),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"About Me 설정"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"개인 정보와 소개 내용을 관리합니다"})]})}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":z?"접기":"펼치기",children:z?e.jsx(D,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(F,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),z&&e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:_(X),className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이름 *"}),e.jsx("input",{...n("name"),type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"이름을 입력하세요"}),p.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"직책 *"}),e.jsx("input",{...n("title"),type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"직책을 입력하세요"}),p.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.title.message})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이메일 *"}),e.jsx("input",{...n("email"),type:"email",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"이메일을 입력하세요"}),p.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"위치 *"}),e.jsx("input",{...n("location"),type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"위치를 입력하세요"}),p.location&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.location.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"소개 제목 *"}),e.jsx("input",{...n("intro_title"),type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"소개 제목을 입력하세요"}),p.intro_title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.intro_title.message})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"기본카드 이미지"}),e.jsx(Y,{onImageUpload:s=>{k(d=>d?{...d,profile_image_url:s}:null),A("profile_image_url",s)},currentImage:b?.profile_image_url,bucketName:"admin-pic",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"소개카드 이미지"}),e.jsx(Y,{onImageUpload:s=>{k(d=>d?{...d,side_image_url:s}:null),A("side_image_url",s)},currentImage:b?.side_image_url,bucketName:"admin-pic",className:"w-full"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이력서 파일"}),e.jsx(ue,{onFileUpload:s=>{k(d=>d?{...d,resume_url:s}:null),A("resume_url",s)},currentFile:b?.resume_url,bucketName:"resume-files",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"버튼 텍스트"}),e.jsx("input",{...n("resume_label"),type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"이력서 다운로드"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{...n("show_resume_button"),type:"checkbox",id:"show_resume_button",className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("label",{htmlFor:"show_resume_button",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"이력서 다운로드 버튼 표시"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"소개 내용 *"}),e.jsx(ie,{value:R("intro_content_html"),onChange:s=>A("intro_content_html",s),placeholder:"소개 내용을 입력하세요...",height:300}),p.intro_content_html&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.intro_content_html.message})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:u,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(M,{size:16}),u?"저장 중...":"설정 저장"]})})]})})]}),e.jsx(ce,{skills:r,onSaveSkills:J,isSaving:u}),e.jsx(xe,{experiences:t,onSaveExperiences:W,isSaving:u}),e.jsx(ge,{educations:E,onSaveEducations:Z,isSaving:u})]})})},Ne=()=>e.jsx(ae,{children:e.jsx(pe,{})});export{Ne as default};
