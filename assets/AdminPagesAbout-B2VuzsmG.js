const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/storage-szlsMsUA.js","assets/index-C0j8p642.js","assets/ui-B0H31a0Z.js","assets/router-CLvrYEWH.js","assets/vendor-RGnvvjkK.js","assets/index-Cvh24tsZ.css"])))=>i.map(i=>d[i]);
import{a as be,b as ye,o as fe,_ as W,s as c,d as T}from"./index-C0j8p642.js";import{j as e,N as we,O as I,C as E,a5 as Q,w as ke,W as q,V as je,R as C,g as X,I as V,u as Ne,B as ve,a6 as Se}from"./ui-B0H31a0Z.js";import{r as x}from"./router-CLvrYEWH.js";import{B as Ie}from"./Breadcrumb-CYQHPn83.js";import{H as Ee}from"./HeroSettings-_Jn-3p5G.js";import{R as Ce}from"./RichTextEditor-JjFmnEZd.js";import{I as Oe,u as De}from"./ImageLibraryContext-Bh74wRQb.js";import"./vendor-RGnvvjkK.js";import"./storage-szlsMsUA.js";const ze=fe({show_about_me:T(),show_experience:T(),show_education:T(),show_skills:T()}),Y={show_about_me:!0,show_experience:!0,show_education:!0,show_skills:!0},Ue=()=>{const[Z,M]=x.useState(!0),[w,d]=x.useState(!1),[F,g]=x.useState(""),[H,h]=x.useState(""),[Ae,ee]=x.useState(null),[n,m]=x.useState(null),[B,P]=x.useState(!1),[p,k]=x.useState([]),[y,j]=x.useState([]),[f,N]=x.useState([]),{open:G}=De(),[O,te]=x.useState(()=>{const t=localStorage.getItem("adminSectionExpanded");return t!==null?JSON.parse(t):!0}),[K,re]=x.useState(()=>{const t=localStorage.getItem("adminAboutHeroExpanded");return t!==null?JSON.parse(t):!0}),[D,ae]=x.useState(()=>{const t=localStorage.getItem("adminAboutBasicExpanded");return t!==null?JSON.parse(t):!0}),[z,le]=x.useState(()=>{const t=localStorage.getItem("adminAboutIntroExpanded");return t!==null?JSON.parse(t):!0}),[U,se]=x.useState(()=>{const t=localStorage.getItem("adminSkillsExpanded");return t!==null?JSON.parse(t):!1}),[A,ie]=x.useState(()=>{const t=localStorage.getItem("adminExperienceExpanded");return t!==null?JSON.parse(t):!1}),[$,ne]=x.useState(()=>{const t=localStorage.getItem("adminEducationExpanded");return t!==null?JSON.parse(t):!1}),oe=()=>{const t=!O;te(t),localStorage.setItem("adminSectionExpanded",JSON.stringify(t))},de=()=>{const t=!K;re(t),localStorage.setItem("adminAboutHeroExpanded",JSON.stringify(t))},ue=()=>{const t=!D;ae(t),localStorage.setItem("adminAboutBasicExpanded",JSON.stringify(t))},ce=()=>{const t=!z;le(t),localStorage.setItem("adminAboutIntroExpanded",JSON.stringify(t))},ge=()=>{const t=!U;se(t),localStorage.setItem("adminSkillsExpanded",JSON.stringify(t))},me=()=>{const t=!A;ie(t),localStorage.setItem("adminExperienceExpanded",JSON.stringify(t))},he=()=>{const t=!$;ne(t),localStorage.setItem("adminEducationExpanded",JSON.stringify(t))},{register:L,handleSubmit:xe,reset:J,watch:_e}=be({resolver:ye(ze),defaultValues:Y});x.useEffect(()=>{(async()=>{try{M(!0);const{data:r,error:a}=await c.from("about_page_settings").select("*").eq("id","default").maybeSingle();if(a)throw a;r?(ee(r),J({show_about_me:r.show_about_me,show_experience:r.show_experience,show_education:r.show_education,show_skills:"show_skills"in r?r.show_skills:!0})):J(Y);const{data:s,error:l}=await c.from("about_page_about_me").select("*").eq("id","default").maybeSingle();if(l)throw l;m(s??null);const{data:i,error:o}=await c.from("about_page_skills").select("*").order("category",{ascending:!0}).order("category_order",{ascending:!0});if(o)throw o;k(i??[]);const{data:u,error:_}=await c.from("about_page_experiences").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});if(_)throw _;j(u??[]);const{data:S,error:v}=await c.from("about_page_educations").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});if(v)throw v;N(S??[])}catch(r){g(r.message||"설정을 불러오지 못했습니다.")}finally{M(!1)}})()},[J]),x.useEffect(()=>{(async()=>{try{const{error:r}=await c.from("about_page_about_me").select("hero_subtitle").limit(1).maybeSingle();P(!r)}catch{P(!1)}})()},[]);const pe=async t=>{d(!0),g(""),h("");try{const r={id:"default",show_about_me:t.show_about_me,show_experience:t.show_experience,show_education:t.show_education,updated_at:new Date().toISOString(),show_skills:_e("show_skills")},{error:a}=await c.from("about_page_settings").upsert(r,{onConflict:"id"});if(a)throw a;const s={id:"default",display_profile_image:n?.display_profile_image??!0,name:n?.name??null,title:n?.title??null,email:n?.email??null,phone:n?.phone??null,location:n?.location??null,birth_year:n?.birth_year??null,show_email:n?.show_email??!0,show_phone:n?.show_phone??!0,show_location:n?.show_location??!0,show_birth_year:n?.show_birth_year??!0,show_resume_button:n?.show_resume_button??!1,resume_url:n?.resume_url??null,resume_label:n?.resume_label??null,...B?{hero_subtitle:n?.hero_subtitle??null}:{},hero_title:n?.hero_title??null,hero_description:n?.hero_description??null,hero_bg_image_url:n?.hero_bg_image_url??null,hero_cta_label:n?.hero_cta_label??null,hero_cta_url:n?.hero_cta_url??null,intro_title:n?.intro_title??null,intro_content_html:n?.intro_content_html??null,profile_image_url:n?.profile_image_url??null,side_image_url:n?.side_image_url??null,updated_at:new Date().toISOString()},{error:l}=await c.from("about_page_about_me").upsert(s,{onConflict:"id"});if(l)throw l;h("설정이 저장되었습니다. (섹션 + Hero)")}catch(r){g(r.message||"설정 저장에 실패했습니다.")}finally{d(!1)}};return e.jsxs("div",{className:"w-full",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx(Ie,{items:[{label:"페이지 관리",path:"/admin/pages/about"},{label:"About"}]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"About 페이지 관리"})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Z?e.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-300",children:[e.jsx(we,{className:"h-5 w-5 animate-spin text-blue-600"}),"설정을 불러오는 중..."]}):e.jsxs("form",{onSubmit:xe(pe),className:"space-y-8",children:[F&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:F}),H&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-600 dark:text-green-400 px-4 py-3 rounded-md",children:H}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:oe,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"섹션 표시 설정"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"About 페이지의 각 섹션 표기 여부를 토글합니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":O?"접기":"펼치기",children:O?e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(E,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),O&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"About Me"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"상단 자기소개/프로필 영역"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...L("show_about_me")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"기술 스택"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"독립 섹션으로 표시"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...L("show_skills")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"경력 사항"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"이력/타임라인"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...L("show_experience")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"학력 사항"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"교육/학위"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...L("show_education")})]})]})]}),e.jsx(Ee,{sectionTitle:"Hero 설정",helperText:"타이틀/설명/배경 이미지/CTA 버튼을 설정합니다.",expanded:K,onToggle:de,values:{title:n?.hero_title??"",description:n?.hero_description??"",bgImageUrl:n?.hero_bg_image_url??"",ctaLabel:n?.hero_cta_label??"",ctaUrl:n?.hero_cta_url??""},onValuesChange:t=>{m(r=>{const a=r??{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()};return{...a,hero_title:t.title!==void 0?t.title??null:a.hero_title,hero_description:t.description!==void 0?t.description??null:a.hero_description,hero_bg_image_url:t.bgImageUrl!==void 0?t.bgImageUrl??null:a.hero_bg_image_url,hero_cta_label:t.ctaLabel!==void 0?t.ctaLabel??null:a.hero_cta_label,hero_cta_url:t.ctaUrl!==void 0?t.ctaUrl??null:a.hero_cta_url}})},fields:{title:!0,description:!0,bgImageUrl:!0,cta:!0,subtitle:!1}}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:ue,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Q,{size:18})," 기본정보 카드"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"이름/타이틀/연락처 등 표시 여부 포함"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":D?"접기":"펼치기",children:D?e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(E,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),D&&e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"기본 정보"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"이름"}),e.jsx("input",{defaultValue:n?.name??"",id:"aboutme-name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,name:t.target.value}:{id:"default",display_profile_image:!0,name:t.target.value,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"직함/타이틀"}),e.jsx("input",{defaultValue:n?.title??"",id:"aboutme-title",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,title:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:t.target.value,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"이메일"}),e.jsx("input",{defaultValue:n?.email??"",id:"aboutme-email",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,email:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:t.target.value,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"연락처(전화)"}),e.jsx("input",{defaultValue:n?.phone??"",id:"aboutme-phone",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,phone:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:t.target.value,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"위치"}),e.jsx("input",{defaultValue:n?.location??"",id:"aboutme-location",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,location:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:t.target.value,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"출생연도"}),e.jsx("input",{type:"number",defaultValue:n?.birth_year??"",id:"aboutme-birth",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,birth_year:t.target.value?Number(t.target.value):null}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:t.target.value?Number(t.target.value):null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n?.show_email??!0,onChange:t=>m(r=>r?{...r,show_email:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:t.target.checked,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"이메일 표시"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n?.show_phone??!0,onChange:t=>m(r=>r?{...r,show_phone:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:t.target.checked,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"연락처 표시"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n?.show_location??!0,onChange:t=>m(r=>r?{...r,show_location:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:t.target.checked,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"위치 표시"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n?.show_birth_year??!0,onChange:t=>m(r=>r?{...r,show_birth_year:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:t.target.checked,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"출생연도 표시"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"버튼/링크"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"이력서 버튼 레이블"}),e.jsx("input",{defaultValue:n?.resume_label??"이력서 다운로드",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,resume_label:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!0,resume_url:null,resume_label:t.target.value,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"이력서 URL"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{defaultValue:n?.resume_url??"",className:"w-full pl-9 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,resume_url:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!0,resume_url:t.target.value,resume_label:"이력서 다운로드",intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})}),e.jsx(ke,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-2",children:"이력서 파일 업로드 (zip, hwp, doc, docx, pdf)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:".zip,.hwp,.doc,.docx,.pdf,application/zip,application/x-hwp,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf",onChange:async t=>{const r=t.target.files?.[0];if(r)try{d(!0);const{uploadFile:a,getPublicUrl:s}=await W(async()=>{const{uploadFile:o,getPublicUrl:u}=await import("./storage-szlsMsUA.js");return{uploadFile:o,getPublicUrl:u}},__vite__mapDeps([0,1,2,3,4,5])),l=await a("resume-files",r,""),i=s("resume-files",l);m(o=>o?{...o,resume_url:i}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!0,resume_url:i,resume_label:"이력서 다운로드",intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),h("이력서 파일이 업로드되었습니다.")}catch(a){g(a.message||"이력서 파일 업로드에 실패했습니다.")}finally{d(!1),t.currentTarget.value=""}},className:"block w-full text-sm text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/30 dark:file:text-blue-300"}),e.jsx(q,{size:18,className:"text-gray-400"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"업로드하면 URL 입력란이 자동으로 채워집니다."})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n?.show_resume_button??!1,onChange:t=>m(r=>r?{...r,show_resume_button:t.target.checked}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:t.target.checked,resume_url:null,resume_label:"이력서 다운로드",intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"이력서 버튼 표시"})]})})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:ce,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Q,{size:18})," 소개 카드"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"소개 텍스트와 사이드 이미지를 관리합니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":z?"접기":"펼치기",children:z?e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(E,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),z&&e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"소개 텍스트"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"소개 섹션 제목"}),e.jsx("input",{defaultValue:n?.intro_title??"자기소개",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,intro_title:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,location:null,birth_year:null,show_email:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:t.target.value,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-2",children:"소개 내용 (리치 텍스트)"}),e.jsx(Ce,{value:n?.intro_content_html??"",onChange:t=>m(r=>r?{...r,intro_content_html:t}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:t,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()})})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(je,{size:16})," 이미지"]}),e.jsxs("div",{className:"mb-6 p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"기본정보 카드 프로필 이미지"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"프로필 이미지 URL"}),e.jsx("input",{defaultValue:n?.profile_image_url??"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,profile_image_url:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:t.target.value,side_image_url:null,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-2",children:"프로필 이미지 업로드"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:async t=>{const r=t.target.files?.[0];if(r)try{d(!0);const{uploadFile:a,getPublicUrl:s}=await W(async()=>{const{uploadFile:o,getPublicUrl:u}=await import("./storage-szlsMsUA.js");return{uploadFile:o,getPublicUrl:u}},__vite__mapDeps([0,1,2,3,4,5])),l=await a("admin-pic",r,"profile"),i=s("admin-pic",l);m(o=>o?{...o,profile_image_url:i}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:i,side_image_url:null,updated_at:new Date().toISOString()}),h("프로필 이미지가 업로드되었습니다.")}catch(a){g(a.message||"프로필 이미지 업로드에 실패했습니다.")}finally{d(!1),t.currentTarget.value=""}},className:"block w-full text-sm text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/30 dark:file:text-blue-300"}),e.jsx(q,{size:18,className:"text-gray-400"})]}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:async()=>{try{const t=await G({bucket:"admin-pic"});t&&(m(r=>r?{...r,profile_image_url:t}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:t,side_image_url:null,updated_at:new Date().toISOString()}),h("프로필 이미지가 선택되었습니다."))}catch(t){g(t.message||"이미지 선택에 실패했습니다.")}},className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600",children:"라이브러리에서 선택"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"업로드하거나 라이브러리에서 선택하면 URL 입력란이 자동으로 채워집니다."})]}),e.jsx("div",{children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n?.display_profile_image??!0,onChange:t=>m(r=>r?{...r,display_profile_image:t.target.checked}:{id:"default",display_profile_image:t.target.checked,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:null,updated_at:new Date().toISOString()}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"프로필 이미지 표시"})]})})]})]}),e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"소개 카드 사이드 이미지"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-1",children:"사이드 이미지 URL"}),e.jsx("input",{defaultValue:n?.side_image_url??"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onChange:t=>m(r=>r?{...r,side_image_url:t.target.value}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:t.target.value,updated_at:new Date().toISOString()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-300 mb-2",children:"사이드 이미지 업로드"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:async t=>{const r=t.target.files?.[0];if(r)try{d(!0);const{uploadFile:a,getPublicUrl:s}=await W(async()=>{const{uploadFile:o,getPublicUrl:u}=await import("./storage-szlsMsUA.js");return{uploadFile:o,getPublicUrl:u}},__vite__mapDeps([0,1,2,3,4,5])),l=await a("admin-pic",r,"side"),i=s("admin-pic",l);m(o=>o?{...o,side_image_url:i}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:i,updated_at:new Date().toISOString()}),h("사이드 이미지가 업로드되었습니다.")}catch(a){g(a.message||"사이드 이미지 업로드에 실패했습니다.")}finally{d(!1),t.currentTarget.value=""}},className:"block w-full text-sm text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/30 dark:file:text-blue-300"}),e.jsx(q,{size:18,className:"text-gray-400"})]}),e.jsx("div",{className:"mt-2 flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:async()=>{try{const t=await G({bucket:"admin-pic"});t&&(m(r=>r?{...r,side_image_url:t}:{id:"default",display_profile_image:!0,name:null,title:null,email:null,phone:null,location:null,birth_year:null,show_email:!0,show_phone:!0,show_location:!0,show_birth_year:!0,show_resume_button:!1,resume_url:null,resume_label:null,intro_title:null,intro_content_html:null,profile_image_url:null,side_image_url:t,updated_at:new Date().toISOString()}),h("사이드 이미지가 선택되었습니다."))}catch(t){g(t.message||"이미지 선택에 실패했습니다.")}},className:"px-3 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600",children:"라이브러리에서 선택"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"업로드하거나 라이브러리에서 선택하면 URL 입력란이 자동으로 채워집니다."})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"button",onClick:async()=>{try{d(!0),g(""),h("");const t={id:"default",display_profile_image:n?.display_profile_image??!0,name:n?.name??null,title:n?.title??null,email:n?.email??null,phone:n?.phone??null,location:n?.location??null,birth_year:n?.birth_year??null,show_email:n?.show_email??!0,show_phone:n?.show_phone??!0,show_location:n?.show_location??!0,show_birth_year:n?.show_birth_year??!0,show_resume_button:n?.show_resume_button??!1,resume_url:n?.resume_url??null,resume_label:n?.resume_label??null,...B?{hero_subtitle:n?.hero_subtitle??null}:{},hero_title:n?.hero_title??null,hero_description:n?.hero_description??null,hero_bg_image_url:n?.hero_bg_image_url??null,hero_cta_label:n?.hero_cta_label??null,hero_cta_url:n?.hero_cta_url??null,intro_title:n?.intro_title??null,intro_content_html:n?.intro_content_html??null,profile_image_url:n?.profile_image_url??null,side_image_url:n?.side_image_url??null,updated_at:new Date().toISOString()},{error:r}=await c.from("about_page_about_me").upsert(t,{onConflict:"id"});if(r)throw r;h("About Me 설정이 저장되었습니다.")}catch(t){g(t.message||"About Me 설정 저장에 실패했습니다.")}finally{d(!1)}},disabled:w,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(C,{size:16}),w?"저장 중...":"About 설정 저장"]})})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:ge,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(X,{size:18})," 기술 스택 요소 설정"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"기술 스택 섹션의 내용과 표시 방식을 관리합니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":U?"접기":"펼치기",children:U?e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(E,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),U&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"기술 스택 목록"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{type:"button",onClick:()=>{const t=prompt("새 분야명을 입력하세요 (예: Frontend, Backend, Database):","");if(t&&t.trim()){const a={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,category:t.trim(),skill_name:"",proficiency:50,display_order:p.length,category_order:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};k([...p,a])}},className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:[e.jsx(V,{size:16}),"분야 추가"]})})]}),p.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(X,{size:48,className:"mx-auto mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("p",{children:"아직 등록된 기술 스택이 없습니다."}),e.jsx("p",{className:"text-sm mt-2",children:'"분야 추가" 버튼을 클릭하여 시작하세요.'})]}):(()=>{const t=p.reduce((a,s,l)=>(a[s.category]||(a[s.category]=[]),a[s.category].push({...s,originalIndex:l}),a),{});Object.keys(t).forEach(a=>{t[a].sort((s,l)=>{const i=s.category_order??s.display_order??0,o=l.category_order??l.display_order??0;return i-o})});const r=Object.keys(t).sort();return e.jsx("div",{className:"space-y-6",children:r.map(a=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",defaultValue:a,onBlur:async s=>{const l=s.target.value.trim();if(!l||l===a)return;const i=p.map(o=>o.category===a?{...o,category:l}:o);k(i);try{d(!0);const{error:o}=await c.from("about_page_skills").update({category:l}).eq("category",a);if(o)throw o;h(`분야명이 "${a}" → "${l}"(으)로 변경되었습니다.`)}catch(o){g(o.message||"분야명 변경 실패")}finally{d(!1)}},className:"text-lg font-semibold text-gray-900 dark:text-white bg-transparent border-b border-transparent focus:border-blue-500 focus:outline-none","aria-label":"분야명"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",t[a].length,"개)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>{const s=t[a]?.length??0,l={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,category:a,skill_name:"",proficiency:50,display_order:p.length,category_order:s,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};k([...p,l])},className:"inline-flex items-center gap-1 px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",title:`${a}에 기술 추가`,children:[e.jsx(V,{size:14}),"기술 추가"]}),e.jsxs("button",{type:"button",onClick:async()=>{if(confirm(`"${a}" 분야의 모든 기술을 삭제하시겠습니까?`)){const l=t[a].filter(o=>o.id&&!o.id.startsWith("local-"));for(const o of l)try{d(!0);const{error:u}=await c.from("about_page_skills").delete().eq("id",o.id);if(u){console.error("분야 삭제 오류:",u),g(`분야 삭제 실패: ${u.message}`);return}}catch(u){g(`분야 삭제 실패: ${u.message}`);return}const i=p.filter(o=>o.category!==a);i.forEach((o,u)=>{o.display_order=u}),k(i),h(`"${a}" 분야가 삭제되었습니다.`),d(!1)}},disabled:w,className:"inline-flex items-center gap-1 px-3 py-1 text-sm bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed",title:`${a} 분야 삭제`,children:[e.jsx(Ne,{size:14}),"분야 삭제"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"기술명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"수준 (0-100)"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t[a].map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 align-middle",children:e.jsx("input",{type:"text",value:s.skill_name,onChange:l=>{const i=[...p];i[s.originalIndex]={...s,skill_name:l.target.value},k(i)},placeholder:"예: React",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2 align-middle",children:e.jsx("input",{type:"number",min:"0",max:"100",value:s.proficiency,onChange:l=>{const i=parseInt(l.target.value)||0,o=Math.max(0,Math.min(100,i)),u=[...p];u[s.originalIndex]={...s,proficiency:o},k(u)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2 align-middle",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{const l=t[a],i=l.findIndex(o=>o.id===s.id);if(i>0){const o=l[i].id,u=l[i-1].id,_=[...p],S=_.findIndex(b=>b.id===o),v=_.findIndex(b=>b.id===u);[_[v],_[S]]=[_[S],_[v]];let R=0;_.filter(b=>b.category===a).forEach(b=>{b.category_order=R++}),k(_)}},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500",title:"위로",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>{const l=t[a],i=l.findIndex(o=>o.id===s.id);if(i<l.length-1){const o=l[i].id,u=l[i+1].id,_=[...p],S=_.findIndex(b=>b.id===o),v=_.findIndex(b=>b.id===u);[_[v],_[S]]=[_[S],_[v]];let R=0;_.filter(b=>b.category===a).forEach(b=>{b.category_order=R++}),k(_)}},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500",title:"아래로",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2 align-middle",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:async()=>{try{d(!0);const l={category:s.category.trim(),skill_name:s.skill_name.trim(),proficiency:s.proficiency,category_order:s.category_order??0};if(s.id&&!s.id.startsWith("local-")){const{error:i}=await c.from("about_page_skills").update(l).eq("id",s.id);if(i)throw i}else{const{error:i}=await c.from("about_page_skills").insert([{...l,display_order:p.findIndex(o=>o.id===s.id)}]);if(i)throw i}h("기술이 저장되었습니다.")}catch(l){g(l.message||"저장 실패")}finally{d(!1)}},className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",title:"저장",children:"저장"}),e.jsx("button",{type:"button",onClick:async()=>{if(s.id&&!s.id.startsWith("local-"))try{d(!0);const{error:o}=await c.from("about_page_skills").delete().eq("id",s.id);if(o)throw o;h("기술 스택이 삭제되었습니다.")}catch(o){g(`삭제 실패: ${o.message}`);return}finally{d(!1)}const i=p.filter((o,u)=>u!==s.originalIndex);i.forEach((o,u)=>{o.display_order=u}),k(i)},disabled:w,className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",title:"삭제",children:"삭제"})]})})]},s.id))})]})})]},a))})})()]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("button",{type:"button",onClick:async()=>{try{d(!0),g(""),h("");const t=p.filter(l=>l.id.startsWith("local-")),r=p.filter(l=>!l.id.startsWith("local-"));if(t.length>0){const{error:l}=await c.from("about_page_skills").insert(t.map((i,o)=>({category:i.category.trim(),skill_name:i.skill_name.trim(),proficiency:i.proficiency,display_order:p.findIndex(u=>u===i),category_order:i.category_order??0})));if(l)throw console.error("Insert error:",l),l}for(const l of r){const{error:i}=await c.from("about_page_skills").update({category:l.category.trim(),skill_name:l.skill_name.trim(),proficiency:l.proficiency,display_order:p.findIndex(o=>o===l),category_order:l.category_order??0}).eq("id",l.id);if(i)throw console.error("Update error:",i),i}const{data:a,error:s}=await c.from("about_page_skills").select("*").order("display_order",{ascending:!0});s?console.error("Fetch error:",s):k(a??[]),h("기술 스택이 저장되었습니다.")}catch(t){console.error("Save error:",t),g(t.message||"기술 스택 저장에 실패했습니다.")}finally{d(!1)}},disabled:w||p.some(t=>!t.category.trim()||!t.skill_name.trim()),className:"inline-flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(C,{size:16}),w?"저장 중...":"기술 스택 저장"]})})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:me,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(ve,{size:18})," 경력사항 요소 설정"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"경력사항 섹션의 내용과 타임라인을 관리합니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":A?"접기":"펼치기",children:A?e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(E,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),A&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"경력 목록"}),e.jsxs("button",{type:"button",onClick:()=>{const t={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,title:"",period:"",company:"",description:"",display_order:y.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};j(r=>[...r,t])},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(V,{size:16})," 경력 추가"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-64",children:"경력명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"경력기간"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"회사명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:y.map((t,r)=>e.jsxs(x.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:t.title,onChange:a=>{const s=[...y];s[r]={...t,title:a.target.value},j(s)},placeholder:"예: 풀스택 개발자",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:t.period,onChange:a=>{const s=[...y];s[r]={...t,period:a.target.value},j(s)},placeholder:"예: 2023 - 현재",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:t.company,onChange:a=>{const s=[...y];s[r]={...t,company:a.target.value},j(s)},placeholder:"예: Tech Company",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{if(r===0)return;const a=[...y];[a[r-1],a[r]]=[a[r],a[r-1]],a.forEach((s,l)=>s.display_order=l),j(a)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500",title:"위로",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>{if(r===y.length-1)return;const a=[...y];[a[r+1],a[r]]=[a[r],a[r+1]],a.forEach((s,l)=>s.display_order=l),j(a)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500",title:"아래로",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:async()=>{try{d(!0);const a={title:t.title.trim(),period:t.period.trim(),company:t.company.trim(),description:(t.description??"").trim()||null,display_order:r};if(t.id&&t.id.startsWith("local-")){const{error:i}=await c.from("about_page_experiences").insert([a]);if(i)throw i}else{const{error:i}=await c.from("about_page_experiences").update(a).eq("id",t.id);if(i)throw i}const{data:s,error:l}=await c.from("about_page_experiences").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});l||j(s??[]),h("경력이 저장되었습니다.")}catch(a){g(a.message||"경력 저장 실패")}finally{d(!1)}},className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",children:"저장"}),e.jsx("button",{type:"button",onClick:async()=>{if(t.id&&!t.id.startsWith("local-"))try{d(!0);const{error:a}=await c.from("about_page_experiences").delete().eq("id",t.id);if(a)throw a}catch(a){g(a.message||"삭제 실패")}finally{d(!1)}j(a=>a.filter((s,l)=>l!==r).map((s,l)=>({...s,display_order:l})))},className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:"삭제"})]})})]},`${t.id}-row1`),e.jsx("tr",{children:e.jsxs("td",{className:"px-3 pb-4 pt-0",colSpan:5,children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"경력설명"}),e.jsx("textarea",{value:t.description??"",onChange:a=>{const s=[...y];s[r]={...t,description:a.target.value},j(s)},placeholder:"간단한 역할/업무 설명",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})},`${t.id}-row2`)]},t.id))})]})}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("button",{type:"button",onClick:async()=>{try{d(!0),g(""),h("");const t=y.filter(l=>l.id.startsWith("local-"));if(t.length){const{error:l}=await c.from("about_page_experiences").insert(t.map((i,o)=>({title:i.title.trim(),period:i.period.trim(),company:i.company.trim(),description:(i.description??"").trim()||null,display_order:y.findIndex(u=>u===i)})));if(l)throw l}const r=y.filter(l=>!l.id.startsWith("local-"));for(const l of r){const{error:i}=await c.from("about_page_experiences").update({title:l.title.trim(),period:l.period.trim(),company:l.company.trim(),description:(l.description??"").trim()||null,display_order:y.findIndex(o=>o===l)}).eq("id",l.id);if(i)throw i}const{data:a,error:s}=await c.from("about_page_experiences").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});s||j(a??[]),h("경력 목록이 저장되었습니다.")}catch(t){g(t.message||"경력 저장 실패")}finally{d(!1)}},disabled:w||y.some(t=>!t.title.trim()||!t.period.trim()||!t.company.trim()),className:"inline-flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(C,{size:16})," ",w?"저장 중...":"경력 전체 저장"]})})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:he,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Se,{size:18})," 학력사항 요소 설정"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"학력사항 섹션의 내용과 표시 방식을 관리합니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":$?"접기":"펼치기",children:$?e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(E,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),$&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"학력 목록"}),e.jsxs("button",{type:"button",onClick:()=>{const t={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,degree:"",period:"",school:"",description:"",display_order:f.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};N(r=>[...r,t])},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(V,{size:16})," 학력 추가"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-64",children:"학위"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"기간"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"학교명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.map((t,r)=>e.jsxs(x.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:t.degree,onChange:a=>{const s=[...f];s[r]={...t,degree:a.target.value},N(s)},placeholder:"예: 컴퓨터공학 학사",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:t.period,onChange:a=>{const s=[...f];s[r]={...t,period:a.target.value},N(s)},placeholder:"예: 2017 - 2021",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:t.school,onChange:a=>{const s=[...f];s[r]={...t,school:a.target.value},N(s)},placeholder:"예: 한국대학교",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{if(r===0)return;const a=[...f];[a[r-1],a[r]]=[a[r],a[r-1]],a.forEach((s,l)=>s.display_order=l),N(a)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500",title:"위로",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>{if(r===f.length-1)return;const a=[...f];[a[r+1],a[r]]=[a[r],a[r+1]],a.forEach((s,l)=>s.display_order=l),N(a)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-500",title:"아래로",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:async()=>{try{d(!0);const a={degree:t.degree.trim(),period:t.period.trim(),school:t.school.trim(),description:(t.description??"").trim()||null,display_order:r};if(t.id&&t.id.startsWith("local-")){const{error:i}=await c.from("about_page_educations").insert([a]);if(i)throw i}else{const{error:i}=await c.from("about_page_educations").update(a).eq("id",t.id);if(i)throw i}const{data:s,error:l}=await c.from("about_page_educations").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});l||N(s??[]),h("학력이 저장되었습니다.")}catch(a){g(a.message||"학력 저장 실패")}finally{d(!1)}},className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",children:"저장"}),e.jsx("button",{type:"button",onClick:async()=>{if(t.id&&!t.id.startsWith("local-"))try{d(!0);const{error:a}=await c.from("about_page_educations").delete().eq("id",t.id);if(a)throw a}catch(a){g(a.message||"삭제 실패")}finally{d(!1)}N(a=>a.filter((s,l)=>l!==r).map((s,l)=>({...s,display_order:l})))},className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:"삭제"})]})})]},`${t.id}-row1`),e.jsx("tr",{children:e.jsxs("td",{className:"px-3 pb-4 pt-0",colSpan:5,children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"상세 설명"}),e.jsx("textarea",{value:t.description??"",onChange:a=>{const s=[...f];s[r]={...t,description:a.target.value},N(s)},placeholder:"세부 학습 내용 등",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})},`${t.id}-row2`)]},t.id))})]})}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("button",{type:"button",onClick:async()=>{try{d(!0),g(""),h("");const t=f.filter(l=>l.id.startsWith("local-"));if(t.length){const{error:l}=await c.from("about_page_educations").insert(t.map((i,o)=>({degree:i.degree.trim(),period:i.period.trim(),school:i.school.trim(),description:(i.description??"").trim()||null,display_order:f.findIndex(u=>u===i)})));if(l)throw l}const r=f.filter(l=>!l.id.startsWith("local-"));for(const l of r){const{error:i}=await c.from("about_page_educations").update({degree:l.degree.trim(),period:l.period.trim(),school:l.school.trim(),description:(l.description??"").trim()||null,display_order:f.findIndex(o=>o===l)}).eq("id",l.id);if(i)throw i}const{data:a,error:s}=await c.from("about_page_educations").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});s||N(a??[]),h("학력 목록이 저장되었습니다.")}catch(t){g(t.message||"학력 저장 실패")}finally{d(!1)}},disabled:w||f.some(t=>!t.degree.trim()||!t.period.trim()||!t.school.trim()),className:"inline-flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(C,{size:16})," ",w?"저장 중...":"학력 전체 저장"]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:w,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(C,{size:16}),w?"저장 중...":"저장"]})})]})})]})},Me=()=>e.jsx(Oe,{children:e.jsx(Ue,{})});export{Me as default};
