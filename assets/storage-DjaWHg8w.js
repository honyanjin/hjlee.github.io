import{s as c}from"./index-BLwlLRil.js";const w=(e,a)=>{const{data:t}=c.storage.from(e).getPublicUrl(a);return t.publicUrl},m=e=>e.normalize("NFKC"),$=e=>{const t=(m(e).toLowerCase().replace(/\\/g,"/").split("/").pop()||"file").split("."),s=t.length>1?t.pop():"",n=(t.join(".")||"file").replace(/\s+/g,"-").replace(/[^a-z0-9._-]/g,"-").replace(/-+/g,"-").replace(/^\.+|\.+$/g,"").slice(0,60)||"file",i=(s||"").replace(/[^a-z0-9]/g,"").slice(0,10);return i?`${n}.${i}`:n},u=e=>{const a=m(e).replace(/\\/g,"/").replace(/\.+/g,".").replace(/\s+/g,"-").replace(/[^a-zA-Z0-9/_-]/g,"-").replace(/\/+/g,"/").replace(/^\/+|\/+$/g,"");return a===".."||a.includes("/../")||a.startsWith("../")||a.endsWith("/..")?"":a},h=async(e,a={})=>{const{limit:t=40,offset:s=0,sortBy:o}=a,n=u(a.prefix||""),{data:i,error:l}=await c.storage.from(e).list(n,{limit:t,offset:s,sortBy:o?{column:o.column,order:o.order}:{column:"name",order:"desc"}});if(l)throw l;return(i||[]).map(r=>{const p=w(e,n?`${n}/${r.name}`:r.name);return{name:n?`${n}/${r.name}`:r.name,id:r.id,updated_at:r.updated_at,created_at:r.created_at,last_accessed_at:r.last_accessed_at,metadata:r.metadata,publicUrl:p}})},_=async(e,a,t="")=>{const o=$(a.name).split("."),n=o.length>1?o.pop():"bin",i=(o.join(".")||"file").replace(/\s+/g,"-").replace(/[^a-z0-9._-]/g,"-").replace(/-+/g,"-"),l=Date.now().toString(36),g=Math.random().toString(36).slice(2,6),r=`${i}-${l}-${g}.${n}`,p=u(t),f=p?`${p}/${r}`:r,{error:d}=await c.storage.from(e).upload(f,a,{cacheControl:"3600",upsert:!1});if(d)throw d;return f},y=async(e,a)=>{const{error:t}=await c.storage.from(e).remove([a]);if(t)throw t},z=async(e,a,t)=>{const{error:s}=await c.storage.from(e).move(a,t);if(s)throw s},x=async(e,a,t)=>{const{error:s}=await c.storage.from(e).copy(a,t);if(s)throw s},F=e=>/(\.png|\.jpe?g|\.gif|\.webp|\.bmp|\.svg)$/i.test(e),U=async(e,a,t)=>{const{data:s,error:o}=await c.storage.from(e).createSignedUrl(a,t);if(o)throw o;return s.signedUrl};export{x as a,$ as b,U as c,w as g,F as i,h as l,z as m,y as r,u as s,_ as u};
