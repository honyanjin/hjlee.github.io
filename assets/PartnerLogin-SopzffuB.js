import{j as e,m as k,N as g,M as N,O as v,q as S}from"./ui-PyLpIfzO.js";import{r,a as E}from"./router-CLvrYEWH.js";import{u as C,a as L,b as P,o as F,s as R,c as h}from"./index-Bon6P73N.js";import"./vendor-RGnvvjkK.js";const z=F({email:h().email("올바른 이메일 주소를 입력해주세요"),password:h().min(6,"비밀번호는 6자 이상이어야 합니다")}),q=()=>{const[a,y]=r.useState(!1),[d,i]=r.useState(!1),[n,c]=r.useState(""),{signIn:f,user:l,isPartner:m,partnerResolved:x}=C(),t=E();r.useEffect(()=>{x&&l&&m&&t(`/partner/${l.id}`,{replace:!0})},[x,l,m,t]);const{register:u,handleSubmit:j,formState:{errors:s}}=L({resolver:P(z)}),w=async p=>{i(!0),c("");try{await f(p.email,p.password);const{data:o}=await R.auth.getUser(),b=o?.user?.id;setTimeout(()=>t(b?`/partner/${b}`:"/partner"),100)}catch(o){c(o.message||"로그인에 실패했습니다. 이메일과 비밀번호를 확인해주세요.")}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900",children:e.jsx(g,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"파트너 로그인"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"파트너 계정으로 로그인하세요"})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:j(w),children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"이메일"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(N,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{...u("email"),id:"email",type:"email",autoComplete:"email",className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"partner@example.com"})]}),s.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"비밀번호"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(g,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{...u("password"),id:"password",type:a?"text":"password",autoComplete:"current-password",className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-white dark:bg-gray-800 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"••••••••"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>y(!a),children:a?e.jsx(v,{className:"h-5 w-5 text-gray-400"}):e.jsx(S,{className:"h-5 w-5 text-gray-400"})})]}),s.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.password.message})]})]}),n&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:n}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"로그인 중...":"로그인"})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>t("/"),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors duration-200",children:"← 포트폴리오로 돌아가기"})})]})]})})};export{q as default};
