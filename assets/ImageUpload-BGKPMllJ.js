import{j as e,X as w,x as C,N as E}from"./ui-Ceor1h3P.js";import{r as a}from"./router-CLvrYEWH.js";import{s as f}from"./index-CkkEqx3o.js";const U=({onImageUpload:n,currentImage:c,className:h="",bucketName:l="blog-images"})=>{const[j,i]=a.useState(!1),[v,o]=a.useState(!1),[x,s]=a.useState(""),p=a.useRef(null),u=async r=>{if(r){if(r.size>5*1024*1024){s("파일 크기는 5MB 이하여야 합니다.");return}if(!r.type.startsWith("image/")){s("이미지 파일만 업로드 가능합니다.");return}try{i(!0),s("");const t=r.name.split(".").pop(),g=`${Date.now()}.${t}`,{error:b}=await f.storage.from(l).upload(g,r,{cacheControl:"3600",upsert:!1});if(b)throw b;const{data:D}=f.storage.from(l).getPublicUrl(g);n(D.publicUrl)}catch(t){s(t.message||"이미지 업로드에 실패했습니다.")}finally{i(!1)}}},y=r=>{const t=r.target.files?.[0];t&&u(t)},d=r=>{r.preventDefault(),r.stopPropagation(),r.type==="dragenter"||r.type==="dragover"?o(!0):r.type==="dragleave"&&o(!1)},N=r=>{r.preventDefault(),r.stopPropagation(),o(!1);const t=r.dataTransfer.files?.[0];t&&u(t)},k=()=>{n("")},m=()=>l==="project-images"?"💡 권장: 1200×630px (19:10 비율) - 프로젝트 썸네일용":"💡 권장: 896×384px (7:3 비율) - 블로그 헤더용";return e.jsxs("div",{className:`space-y-4 ${h}`,children:[x&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:x}),c?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:c,alt:"업로드된 이미지",className:"w-full h-64 sm:h-80 lg:h-96 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:k,className:"absolute top-2 right-2 bg-red-600 text-white p-1 rounded-full hover:bg-red-700 transition-colors",children:e.jsx(w,{size:16})})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:m()})})]}):e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${v?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,onDragEnter:d,onDragLeave:d,onDragOver:d,onDrop:N,children:[e.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:y,className:"hidden"}),j?e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(C,{className:"h-8 w-8 text-blue-600 animate-spin"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"이미지 업로드 중..."})]}):e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-full",children:e.jsx(E,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"이미지를 드래그하여 업로드하거나"}),e.jsx("button",{type:"button",onClick:()=>p.current?.click(),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"파일 선택"})]}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"PNG, JPG, GIF 최대 5MB"}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:m()})]})]})]})]})};export{U as I};
