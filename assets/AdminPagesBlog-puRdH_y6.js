import{j as e,N as w,O as x,C as g,R as B}from"./ui-B0H31a0Z.js";import{r as a}from"./router-CLvrYEWH.js";import{a as L,b as D,o as q,s as S,c as l,d as _}from"./index-BLqIClZs.js";import{B as P}from"./Breadcrumb-CYQHPn83.js";import{H as G}from"./HeroSettings-_Jn-3p5G.js";import"./vendor-RGnvvjkK.js";const K=q({hero_title:l().optional(),hero_description:l().optional(),hero_bg_image_url:l().optional(),hero_cta_label:l().optional(),hero_cta_url:l().optional(),featured_post_enabled:_(),featured_post_title:l().optional(),featured_post_description:l().optional(),recommended_posts_enabled:_(),recommended_posts_title:l().optional(),recommended_posts_description:l().optional(),all_posts_enabled:_(),all_posts_title:l().optional(),all_posts_description:l().optional()}),M={hero_title:"",hero_description:"",hero_bg_image_url:"",hero_cta_label:"",hero_cta_url:"",featured_post_enabled:!0,featured_post_title:"Featured Post",featured_post_description:"최신 블로그 포스트를 확인해보세요",recommended_posts_enabled:!0,recommended_posts_title:"Recommended Posts",recommended_posts_description:"추천 포스트를 확인해보세요",all_posts_enabled:!0,all_posts_title:"All Posts",all_posts_description:"모든 블로그 포스트를 확인해보세요"},se=()=>{const[E,h]=a.useState(!0),[y,f]=a.useState(!1),[j,d]=a.useState(""),[N,m]=a.useState(""),[Q,k]=a.useState(null),[c,I]=a.useState(()=>{const t=localStorage.getItem("blogSettingsExpanded");return t!==null?JSON.parse(t):!0}),[v,F]=a.useState(()=>{const t=localStorage.getItem("blogHeroExpanded");return t!==null?JSON.parse(t):!0}),[u,A]=a.useState(()=>{const t=localStorage.getItem("blogFeaturedPostExpanded");return t!==null?JSON.parse(t):!0}),[p,O]=a.useState(()=>{const t=localStorage.getItem("blogRecommendedPostsExpanded");return t!==null?JSON.parse(t):!0}),[b,R]=a.useState(()=>{const t=localStorage.getItem("blogAllPostsExpanded");return t!==null?JSON.parse(t):!0}),{register:o,handleSubmit:C,setValue:r,watch:n,formState:{errors:W}}=L({resolver:D(K),defaultValues:M}),J=()=>{const t=!c;I(t),localStorage.setItem("blogSettingsExpanded",JSON.stringify(t))},U=()=>{const t=!v;F(t),localStorage.setItem("blogHeroExpanded",JSON.stringify(t))},z=()=>{const t=!u;A(t),localStorage.setItem("blogFeaturedPostExpanded",JSON.stringify(t))},H=()=>{const t=!p;O(t),localStorage.setItem("blogRecommendedPostsExpanded",JSON.stringify(t))},T=()=>{const t=!b;R(t),localStorage.setItem("blogAllPostsExpanded",JSON.stringify(t))};a.useEffect(()=>{(async()=>{try{h(!0),d("");const{data:s,error:i}=await S.from("blog_page_settings").select("*").eq("id","default").maybeSingle();if(i){console.error("설정 로딩 에러:",i),d("설정을 불러오는데 실패했습니다.");return}s&&(k(s),r("hero_title",s.hero_title??""),r("hero_description",s.hero_description??""),r("hero_bg_image_url",s.hero_bg_image_url??""),r("hero_cta_label",s.hero_cta_label??""),r("hero_cta_url",s.hero_cta_url??""),r("featured_post_enabled",s.featured_post_enabled??!0),r("featured_post_title",s.featured_post_title??"Featured Post"),r("featured_post_description",s.featured_post_description??"최신 블로그 포스트를 확인해보세요"),r("recommended_posts_enabled",s.recommended_posts_enabled??!0),r("recommended_posts_title",s.recommended_posts_title??"Recommended Posts"),r("recommended_posts_description",s.recommended_posts_description??"추천 포스트를 확인해보세요"),r("all_posts_enabled",s.all_posts_enabled??!0),r("all_posts_title",s.all_posts_title??"All Posts"),r("all_posts_description",s.all_posts_description??"모든 블로그 포스트를 확인해보세요"))}catch(s){console.error("설정 로딩 중 오류:",s),d("설정을 불러오는데 실패했습니다.")}finally{h(!1)}})()},[r]);const V=async t=>{try{f(!0),d(""),m("");const s={id:"default",hero_title:t.hero_title||null,hero_description:t.hero_description||null,hero_bg_image_url:t.hero_bg_image_url||null,hero_cta_label:t.hero_cta_label||null,hero_cta_url:t.hero_cta_url||null,featured_post_enabled:t.featured_post_enabled,featured_post_title:t.featured_post_title||null,featured_post_description:t.featured_post_description||null,recommended_posts_enabled:t.recommended_posts_enabled,recommended_posts_title:t.recommended_posts_title||null,recommended_posts_description:t.recommended_posts_description||null,all_posts_enabled:t.all_posts_enabled,all_posts_title:t.all_posts_title||null,all_posts_description:t.all_posts_description||null,updated_at:new Date().toISOString()},{error:i}=await S.from("blog_page_settings").upsert(s);if(i){console.error("설정 저장 에러:",i),d("설정을 저장하는데 실패했습니다.");return}k(s),m("설정이 성공적으로 저장되었습니다."),setTimeout(()=>m(""),3e3)}catch(s){console.error("설정 저장 중 오류:",s),d("설정을 저장하는데 실패했습니다.")}finally{f(!1)}};return E?e.jsxs("div",{className:"w-full",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx(P,{items:[{label:"페이지 관리",path:"/admin/pages/blog"},{label:"Blog"}]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Blog 페이지 관리"})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(w,{className:"animate-spin h-8 w-8 text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"설정을 불러오는 중..."})]})})]}):e.jsxs("div",{className:"w-full",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx(P,{items:[{label:"페이지 관리",path:"/admin/pages/blog"},{label:"Blog"}]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Blog 페이지 관리"})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("form",{onSubmit:C(V),className:"space-y-6",children:[j&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg dark:bg-red-900/20 dark:border-red-800 dark:text-red-400",children:j}),N&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg dark:bg-green-900/20 dark:border-green-800 dark:text-green-400",children:N}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:J,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"섹션 표시 설정"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Hero/Featured Post/Recommended Posts/All Posts 섹션을 켜고 끌 수 있습니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":c?"접기":"펼치기",children:c?e.jsx(x,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(g,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),c&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Featured Post 표시"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"최신 포스트를 강조 표시하는 섹션"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...o("featured_post_enabled")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Recommended Posts 표시"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"추천 포스트 카로셀 섹션"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...o("recommended_posts_enabled")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"All Posts 표시"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"모든 포스트 목록과 검색/필터링 섹션"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...o("all_posts_enabled")})]})]})]}),e.jsx(G,{sectionTitle:"Hero 설정",helperText:"타이틀/설명/배경 이미지/CTA 버튼을 설정합니다.",expanded:v,onToggle:U,values:{title:n("hero_title")||"",description:n("hero_description")||"",bgImageUrl:n("hero_bg_image_url")||"",ctaLabel:n("hero_cta_label")||"",ctaUrl:n("hero_cta_url")||""},onValuesChange:t=>{t.title!==void 0&&r("hero_title",t.title??""),t.description!==void 0&&r("hero_description",t.description??""),t.bgImageUrl!==void 0&&r("hero_bg_image_url",t.bgImageUrl??""),t.ctaLabel!==void 0&&r("hero_cta_label",t.ctaLabel??""),t.ctaUrl!==void 0&&r("hero_cta_url",t.ctaUrl??"")},fields:{title:!0,description:!0,bgImageUrl:!0,cta:!0,subtitle:!1}}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:z,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:u?e.jsx(x,{size:20}):e.jsx(g,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Featured Post 설정"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"최신 포스트를 강조 표시하는 섹션을 설정합니다."})]})]})}),u&&e.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"섹션 제목"}),e.jsx("input",{type:"text",...o("featured_post_title"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Featured Post"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"섹션 설명"}),e.jsx("input",{type:"text",...o("featured_post_description"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"최신 블로그 포스트를 확인해보세요"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:H,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:p?e.jsx(x,{size:20}):e.jsx(g,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recommended Posts 설정"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"추천 포스트 카로셀 섹션을 설정합니다."})]})]})}),p&&e.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"섹션 제목"}),e.jsx("input",{type:"text",...o("recommended_posts_title"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Recommended Posts"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"섹션 설명"}),e.jsx("input",{type:"text",...o("recommended_posts_description"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"추천 포스트를 확인해보세요"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:T,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:b?e.jsx(x,{size:20}):e.jsx(g,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"All Posts 설정"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"모든 포스트 목록과 검색/필터링 섹션을 설정합니다."})]})]})}),b&&e.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"섹션 제목"}),e.jsx("input",{type:"text",...o("all_posts_title"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"All Posts"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"섹션 설명"}),e.jsx("input",{type:"text",...o("all_posts_description"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"모든 블로그 포스트를 확인해보세요"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:y,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:y?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"저장 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"-ml-1 mr-2 h-4 w-4"}),"저장"]})})})]})})]})};export{se as default};
