import{j as e,Y as A,C as I,a0 as z,Q as L,I as P,g as X}from"./ui-PyLpIfzO.js";import{r as i}from"./router-CLvrYEWH.js";import{a as q,b as U,o as $,f as w,I as Z,s as h,A as O,c as N,n as ee,l as te}from"./index-Bon6P73N.js";import{A as re}from"./AdminPageHeader-MoPJ4cBD.js";import{R as ae}from"./RichTextEditor-B46_kjbJ.js";import"./vendor-RGnvvjkK.js";const se=$({show_about_me:w(),show_experience:w(),show_education:w(),show_skills:w()}),le=({settings:p,onSave:f,isSaving:g})=>{const[d,j]=i.useState(!0),{register:a,handleSubmit:c,formState:{errors:u}}=q({resolver:U(se),defaultValues:{show_about_me:p.show_about_me,show_experience:p.show_experience,show_education:p.show_education,show_skills:p.show_skills||!0}}),x=async k=>{await f(k)};return e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>j(!d),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"기본 설정"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"페이지 섹션 표시 여부 설정"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":d?"접기":"펼치기",children:d?e.jsx(A,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),d&&e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:c(x),className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...a("show_about_me"),type:"checkbox",id:"show_about_me",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"show_about_me",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"About Me 섹션 표시"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...a("show_experience"),type:"checkbox",id:"show_experience",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"show_experience",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"경력 섹션 표시"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...a("show_education"),type:"checkbox",id:"show_education",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"show_education",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"학력 섹션 표시"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...a("show_skills"),type:"checkbox",id:"show_skills",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"show_skills",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"스킬 섹션 표시"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:g,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(z,{size:16}),g?"저장 중...":"설정 저장"]})})]})})]})},de=({skills:p,onSaveSkills:f,isSaving:g})=>{const[d,j]=i.useState(!0),[a,c]=i.useState(p),u=()=>{const t={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,category:"",skill_name:"",proficiency:50,display_order:a.length,category_order:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};c([...a,t])},x=(t,s,r)=>{const n=[...a];n[t]={...n[t],[s]:r},c(n)},k=t=>{c(a.filter((s,r)=>r!==t))},y=(t,s)=>{if(s==="up"&&t===0||s==="down"&&t===a.length-1)return;const r=[...a],n=s==="up"?t-1:t+1;[r[t],r[n]]=[r[n],r[t]],r.forEach((v,S)=>{v.display_order=S}),c(r)},_=async()=>{await f(a)};return e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>j(!d),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"스킬 관리"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"카테고리/스킬명/숙련도로 다건 관리"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":d?"접기":"펼치기",children:d?e.jsx(A,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),d&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{type:"button",onClick:u,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(L,{size:16}),"스킬 추가"]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["💡 ",e.jsx("strong",{children:"입력 안내:"})," 카테고리/스킬명은 자유 텍스트, 숙련도는 0-100% 슬라이더로 설정"]})}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"카테고리"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"스킬명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"숙련도"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:a.map((t,s)=>e.jsx(i.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>y(s,"up"),className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>y(s,"down"),className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.category,onChange:r=>x(s,"category",r.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: Frontend"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.skill_name,onChange:r=>x(s,"skill_name",r.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: React"})}),e.jsxs("td",{className:"px-3 py-2",children:[e.jsx("input",{type:"range",min:"0",max:"100",value:t.proficiency,onChange:r=>x(s,"proficiency",parseInt(r.target.value)),className:"w-full"}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:[t.proficiency,"%"]})]}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("div",{className:"inline-flex gap-2",children:e.jsx("button",{type:"button",onClick:()=>k(s),className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:e.jsx(P,{size:14})})})})]})},t.id))})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("button",{type:"button",onClick:_,disabled:g||a.some(t=>!t.category.trim()||!t.skill_name.trim()),className:"inline-flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(z,{size:16}),g?"저장 중...":"스킬 전체 저장"]})})]})]})},oe=({experiences:p,onSaveExperiences:f,isSaving:g})=>{const[d,j]=i.useState(!0),[a,c]=i.useState(p),u=()=>{const t={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,title:"",period:"",company:"",description:"",display_order:a.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};c([...a,t])},x=(t,s,r)=>{const n=[...a];n[t]={...n[t],[s]:r},c(n)},k=t=>{c(a.filter((s,r)=>r!==t))},y=(t,s)=>{if(s==="up"&&t===0||s==="down"&&t===a.length-1)return;const r=[...a],n=s==="up"?t-1:t+1;[r[t],r[n]]=[r[n],r[t]],r.forEach((v,S)=>{v.display_order=S}),c(r)},_=async()=>{await f(a)};return e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>j(!d),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"경력 관리"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"직책/기간/회사/설명으로 다건 관리"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":d?"접기":"펼치기",children:d?e.jsx(A,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),d&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{type:"button",onClick:u,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(L,{size:16}),"경력 추가"]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["💡 ",e.jsx("strong",{children:"입력 안내:"})," 직책/기간/회사/설명은 자유 텍스트입니다."]})}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"직책"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"기간"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"회사"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"설명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:a.map((t,s)=>e.jsx(i.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>y(s,"up"),className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>y(s,"down"),className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.title,onChange:r=>x(s,"title",r.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: Frontend Developer"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.period,onChange:r=>x(s,"period",r.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: 2022.01 - 2023.12"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.company,onChange:r=>x(s,"company",r.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: ABC Company"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("textarea",{value:t.description||"",onChange:r=>x(s,"description",r.target.value),rows:2,className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"주요 업무 내용 등"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("div",{className:"inline-flex gap-2",children:e.jsx("button",{type:"button",onClick:()=>k(s),className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:e.jsx(P,{size:14})})})})]})},t.id))})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("button",{type:"button",onClick:_,disabled:g||a.some(t=>!t.title.trim()||!t.period.trim()||!t.company.trim()),className:"inline-flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(z,{size:16}),g?"저장 중...":"경력 전체 저장"]})})]})]})},ne=({educations:p,onSaveEducations:f,isSaving:g})=>{const[d,j]=i.useState(!0),[a,c]=i.useState(p),u=()=>{const t={id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,degree:"",period:"",school:"",description:"",display_order:a.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};c([...a,t])},x=(t,s,r)=>{const n=[...a];n[t]={...n[t],[s]:r},c(n)},k=t=>{c(a.filter((s,r)=>r!==t))},y=(t,s)=>{if(s==="up"&&t===0||s==="down"&&t===a.length-1)return;const r=[...a],n=s==="up"?t-1:t+1;[r[t],r[n]]=[r[n],r[t]],r.forEach((v,S)=>{v.display_order=S}),c(r)},_=async()=>{await f(a)};return e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>j(!d),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"학력 관리"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"학위/기간/학교/설명으로 다건 관리"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":d?"접기":"펼치기",children:d?e.jsx(A,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),d&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{type:"button",onClick:u,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(L,{size:16}),"학력 추가"]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["💡 ",e.jsx("strong",{children:"입력 안내:"})," 학위/기간/학교/설명은 자유 텍스트입니다."]})}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"학위"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"기간"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-48",children:"학교"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"설명"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:a.map((t,s)=>e.jsx(i.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>y(s,"up"),className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>y(s,"down"),className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.degree,onChange:r=>x(s,"degree",r.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: 컴퓨터공학 학사"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.period,onChange:r=>x(s,"period",r.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: 2018.03 - 2022.02"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.school,onChange:r=>x(s,"school",r.target.value),className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"예: ABC University"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("textarea",{value:t.description||"",onChange:r=>x(s,"description",r.target.value),rows:2,className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"세부 학습 내용 등"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("div",{className:"inline-flex gap-2",children:e.jsx("button",{type:"button",onClick:()=>k(s),className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:e.jsx(P,{size:14})})})})]})},t.id))})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("button",{type:"button",onClick:_,disabled:g||a.some(t=>!t.degree.trim()||!t.period.trim()||!t.school.trim()),className:"inline-flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(z,{size:16}),g?"저장 중...":"학력 전체 저장"]})})]})]})},ie=$({display_profile_image:w(),name:N().min(1,"이름을 입력하세요"),title:N().min(1,"직책을 입력하세요"),email:N().email("올바른 이메일을 입력하세요"),phone:N().optional(),location:N().min(1,"위치를 입력하세요"),birth_year:ee().min(1900,"올바른 출생년도를 입력하세요").max(new Date().getFullYear(),"올바른 출생년도를 입력하세요"),show_email:w(),show_phone:w(),show_location:w(),show_birth_year:w(),show_resume_button:w(),resume_url:N().url("올바른 URL을 입력하세요").optional().or(te("")),resume_label:N().optional(),intro_title:N().min(1,"소개 제목을 입력하세요"),intro_content_html:N().min(1,"소개 내용을 입력하세요")}),ce=()=>{const[p,f]=i.useState(!0),[g,d]=i.useState(!1),[j,a]=i.useState(""),[c,u]=i.useState(""),[x,k]=i.useState(null),[y,_]=i.useState(null),[t,s]=i.useState([]),[r,n]=i.useState([]),[v,S]=i.useState([]),[M,B]=i.useState(!0),{register:C,handleSubmit:T,formState:{errors:b},reset:V,setValue:Y,watch:H}=q({resolver:U(ie)});i.useEffect(()=>{E()},[]);const E=async()=>{try{f(!0),a("");const[l,o,R,D,F]=await Promise.allSettled([h.from("about_page_settings").select("*").eq("id","default").maybeSingle(),h.from("about_page_about_me").select("*").eq("id","default").maybeSingle(),h.from("about_page_skills").select("*").order("category",{ascending:!0}).order("category_order",{ascending:!0}),h.from("about_page_experiences").select("*").order("display_order",{ascending:!0}),h.from("about_page_educations").select("*").order("display_order",{ascending:!0})]);if(l.status==="fulfilled"&&l.value.data&&k(l.value.data),o.status==="fulfilled"&&o.value.data){const m=o.value.data;_(m),V({display_profile_image:m.display_profile_image,name:m.name||"",title:m.title||"",email:m.email||"",phone:m.phone||"",location:m.location||"",birth_year:m.birth_year||1990,show_email:m.show_email,show_phone:m.show_phone||!1,show_location:m.show_location,show_birth_year:m.show_birth_year,show_resume_button:m.show_resume_button,resume_url:m.resume_url||"",resume_label:m.resume_label||"",intro_title:m.intro_title||"",intro_content_html:m.intro_content_html||""})}R.status==="fulfilled"&&R.value.data&&s(R.value.data),D.status==="fulfilled"&&D.value.data&&n(D.value.data),F.status==="fulfilled"&&F.value.data&&S(F.value.data)}catch(l){a("데이터를 불러오는데 실패했습니다."),console.error("Error loading data:",l)}finally{f(!1)}},Q=async l=>{try{d(!0),a(""),u("");const{error:o}=await h.from("about_page_about_me").update({display_profile_image:l.display_profile_image,name:l.name,title:l.title,email:l.email,phone:l.phone,location:l.location,birth_year:l.birth_year,show_email:l.show_email,show_phone:l.show_phone,show_location:l.show_location,show_birth_year:l.show_birth_year,show_resume_button:l.show_resume_button,resume_url:l.resume_url||null,resume_label:l.resume_label,intro_title:l.intro_title,intro_content_html:l.intro_content_html,updated_at:new Date().toISOString()}).eq("id",y?.id);if(o)throw o;u("About Me 설정이 저장되었습니다."),await E()}catch(o){a("설정 저장에 실패했습니다."),console.error("Error saving about me settings:",o)}finally{d(!1)}},G=async l=>{try{d(!0),a(""),u("");const{error:o}=await h.from("about_page_settings").update({show_about_me:l.show_about_me,show_experience:l.show_experience,show_education:l.show_education,show_skills:l.show_skills,updated_at:new Date().toISOString()}).eq("id",x?.id);if(o)throw o;u("페이지 설정이 저장되었습니다."),await E()}catch(o){a("설정 저장에 실패했습니다."),console.error("Error saving page settings:",o)}finally{d(!1)}},J=async l=>{try{if(d(!0),a(""),u(""),await h.from("about_page_skills").delete().neq("id","00000000-0000-0000-0000-000000000000"),l.length>0){const{error:o}=await h.from("about_page_skills").insert(l);if(o)throw o}u("스킬이 저장되었습니다."),await E()}catch(o){a("스킬 저장에 실패했습니다."),console.error("Error saving skills:",o)}finally{d(!1)}},K=async l=>{try{if(d(!0),a(""),u(""),await h.from("about_page_experiences").delete().neq("id","00000000-0000-0000-0000-000000000000"),l.length>0){const{error:o}=await h.from("about_page_experiences").insert(l);if(o)throw o}u("경력이 저장되었습니다."),await E()}catch(o){a("경력 저장에 실패했습니다."),console.error("Error saving experiences:",o)}finally{d(!1)}},W=async l=>{try{if(d(!0),a(""),u(""),await h.from("about_page_educations").delete().neq("id","00000000-0000-0000-0000-000000000000"),l.length>0){const{error:o}=await h.from("about_page_educations").insert(l);if(o)throw o}u("학력이 저장되었습니다."),await E()}catch(o){a("학력 저장에 실패했습니다."),console.error("Error saving educations:",o)}finally{d(!1)}};return p?e.jsx(O,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"animate-spin h-8 w-8 text-blue-600"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"데이터를 불러오는 중..."})]})})}):e.jsx(O,{children:e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsx(re,{title:"About 페이지 관리",description:"About 페이지의 모든 설정과 콘텐츠를 관리합니다."}),j&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:j}),c&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-600 dark:text-green-400 px-4 py-3 rounded-md",children:c}),x&&e.jsx(le,{settings:x,onSave:G,isSaving:g}),y&&e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>B(!M),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"About Me 설정"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"개인 정보와 소개 내용을 관리합니다"})]})}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":M?"접기":"펼치기",children:M?e.jsx(A,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(I,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),M&&e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:T(Q),className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이름 *"}),e.jsx("input",{...C("name"),type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"이름을 입력하세요"}),b.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"직책 *"}),e.jsx("input",{...C("title"),type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"직책을 입력하세요"}),b.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.title.message})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이메일 *"}),e.jsx("input",{...C("email"),type:"email",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"이메일을 입력하세요"}),b.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"위치 *"}),e.jsx("input",{...C("location"),type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"위치를 입력하세요"}),b.location&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.location.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"소개 제목 *"}),e.jsx("input",{...C("intro_title"),type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"소개 제목을 입력하세요"}),b.intro_title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.intro_title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"소개 내용 *"}),e.jsx(ae,{value:H("intro_content_html"),onChange:l=>Y("intro_content_html",l),placeholder:"소개 내용을 입력하세요...",height:300}),b.intro_content_html&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.intro_content_html.message})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:g,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(z,{size:16}),g?"저장 중...":"설정 저장"]})})]})})]}),e.jsx(de,{skills:t,onSaveSkills:J,isSaving:g}),e.jsx(oe,{experiences:r,onSaveExperiences:K,isSaving:g}),e.jsx(ne,{educations:v,onSaveEducations:W,isSaving:g})]})})},be=()=>e.jsx(Z,{children:e.jsx(ce,{})});export{be as default};
