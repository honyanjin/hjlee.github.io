import{j as e,O as M,C as v,I as U,u as J,R as K,e as Q,P as X,M as Y,n as Z}from"./ui-B0H31a0Z.js";import{r as d}from"./router-CLvrYEWH.js";import{B as ee}from"./Breadcrumb-CYQHPn83.js";import{a as te,b as re,s as n,o as ae,d as f,c as _,l as W}from"./index-b5FANDsy.js";import{H as se}from"./HeroSettings-_Jn-3p5G.js";import"./vendor-RGnvvjkK.js";const $={Mail:Y,Phone:X,MapPin:Q},le=({value:j,onChange:S})=>{const[C,o]=d.useState(!1),y=j&&(j in $?j:"Mail")||"Mail",c=$[y],I=Object.keys($);return e.jsxs("div",{className:"relative inline-block text-left",tabIndex:0,onBlur:()=>o(!1),children:[e.jsxs("button",{type:"button",onClick:()=>o(i=>!i),className:"w-full inline-flex items-center justify-between gap-2 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(c,{size:16,className:"text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm",children:y})]}),e.jsx(v,{size:16,className:"text-gray-400"})]}),C&&e.jsx("div",{className:"absolute z-20 mt-1 w-40 origin-top-right bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg",children:e.jsx("div",{className:"py-1",children:I.map(i=>{const b=$[i],E=i===y;return e.jsxs("button",{type:"button",onClick:()=>{S(i),o(!1)},className:`w-full px-3 py-2 text-left inline-flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${E?"bg-gray-50 dark:bg-gray-700/60":""}`,children:[e.jsx(b,{size:16,className:"text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-100",children:i}),E&&e.jsx(Z,{size:14,className:"ml-auto text-green-600"})]},i)})})})]})},oe=ae({show_hero:_(),hero_title:f().optional(),hero_description:f().optional(),hero_bg_image_url:f().url().optional().or(W("")),hero_cta_label:f().optional(),hero_cta_url:f().url().optional().or(W("")),show_form:_(),show_info:_(),show_socials:_(),show_hours:_(),success_message:f().optional()}),H={show_hero:!0,hero_title:"Contact Me",hero_description:"프로젝트나 협업에 관심이 있으시다면 언제든 연락주세요! 새로운 아이디어나 기술에 대한 이야기를 나누고 싶습니다.",hero_bg_image_url:"",hero_cta_label:"",hero_cta_url:"",show_form:!0,show_info:!0,show_socials:!0,show_hours:!0,success_message:"메시지가 성공적으로 전송되었습니다! 곧 답변드리겠습니다."},he=()=>{const[j,S]=d.useState(!0),[C,o]=d.useState(!1),[y,c]=d.useState(""),[I,i]=d.useState(""),[b,E]=d.useState(()=>JSON.parse(localStorage.getItem("contactSettingsExpanded")||"true")),[L,F]=d.useState(()=>JSON.parse(localStorage.getItem("contactHeroExpanded")||"true")),[O,A]=d.useState(()=>JSON.parse(localStorage.getItem("contactInfoExpanded")||"true")),[z,R]=d.useState(()=>JSON.parse(localStorage.getItem("contactSocialsExpanded")||"false")),[D,B]=d.useState(()=>JSON.parse(localStorage.getItem("contactHoursExpanded")||"false")),[h,x]=d.useState([]),[m,g]=d.useState([]),[p,u]=d.useState([]),{register:w,handleSubmit:G,reset:P,setValue:N,watch:k}=te({resolver:re(oe),defaultValues:H});d.useEffect(()=>{(async()=>{try{S(!0);const{data:a,error:r}=await n.from("contact_page_settings").select("*").eq("id","default").maybeSingle();if(r)throw r;a&&P({show_hero:a.show_hero??!0,hero_title:a.hero_title??H.hero_title,hero_description:a.hero_description??H.hero_description,hero_bg_image_url:a.hero_bg_image_url??"",hero_cta_label:a.hero_cta_label??"",hero_cta_url:a.hero_cta_url??"",show_form:a.show_form??!0,show_info:a.show_info??!0,show_socials:a.show_socials??!0,show_hours:a.show_hours??!0,success_message:a.success_message??H.success_message});const{data:s}=await n.from("contact_info").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});x(s??[]);const{data:l}=await n.from("contact_socials").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});g(l??[]);const{data:T}=await n.from("contact_hours").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});u(T??[])}catch(a){c(a.message||"설정을 불러오지 못했습니다.")}finally{S(!1)}})()},[P]);const V=async t=>{o(!0),c(""),i("");try{const a={id:"default",show_hero:t.show_hero,hero_title:t.hero_title||null,hero_description:t.hero_description||null,hero_bg_image_url:t.hero_bg_image_url||null,hero_cta_label:t.hero_cta_label||null,hero_cta_url:t.hero_cta_url||null,show_form:t.show_form,show_info:t.show_info,show_socials:t.show_socials,show_hours:t.show_hours,success_message:t.success_message||null,updated_at:new Date().toISOString()},{error:r}=await n.from("contact_page_settings").upsert(a,{onConflict:"id"});if(r)throw r;i("설정을 저장했습니다.")}catch(a){c(a.message||"설정 저장에 실패했습니다.")}finally{o(!1)}};return e.jsxs("div",{className:"w-full",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx(ee,{items:[{label:"페이지 관리",path:"/admin/pages/contact"},{label:"Contact"}]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Contact 페이지 관리"})]})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:j?e.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"불러오는 중..."}):e.jsxs("form",{onSubmit:G(V),className:"space-y-8",children:[y&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:y}),I&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-600 dark:text-green-400 px-4 py-3 rounded-md",children:I}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>{const t=!b;E(t),localStorage.setItem("contactSettingsExpanded",JSON.stringify(t))},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"섹션 표시 설정"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"히어로/폼/연락처/소셜/업무시간 섹션을 켜고 끌 수 있습니다."})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":b?"접기":"펼치기",children:b?e.jsx(M,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(v,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),b&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Hero 표시"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"타이틀/설명/배경 이미지 영역"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...w("show_hero")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"폼 표시"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"문의 폼 제출 섹션"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...w("show_form")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"연락처 표시"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"연락처 카드 목록"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...w("show_info")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"소셜 링크 표시"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"소셜 아이콘/링크"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...w("show_socials")})]}),e.jsxs("label",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"업무 가능 시간 표시"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"라벨/시간/비고 카드"})]}),e.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...w("show_hours")})]})]})]}),e.jsx(se,{sectionTitle:"Hero 설정",helperText:"타이틀/설명/배경 이미지/CTA 버튼을 설정합니다.",expanded:L,onToggle:()=>{const t=!L;F(t),localStorage.setItem("contactHeroExpanded",JSON.stringify(t))},values:{title:k("hero_title")||"",description:k("hero_description")||"",bgImageUrl:k("hero_bg_image_url")||"",ctaLabel:k("hero_cta_label")||"",ctaUrl:k("hero_cta_url")||""},onValuesChange:t=>{t.title!==void 0&&N("hero_title",t.title??""),t.description!==void 0&&N("hero_description",t.description??""),t.bgImageUrl!==void 0&&N("hero_bg_image_url",t.bgImageUrl??""),t.ctaLabel!==void 0&&N("hero_cta_label",t.ctaLabel??""),t.ctaUrl!==void 0&&N("hero_cta_url",t.ctaUrl??"")},fields:{title:!0,description:!0,bgImageUrl:!0,cta:!0,subtitle:!1}}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>{const t=!O;A(t),localStorage.setItem("contactInfoExpanded",JSON.stringify(t))},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"연락처 카드"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"type/label/value/link/icon을 관리합니다. (type→아이콘 자동 매핑 가능)"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":O?"접기":"펼치기",children:O?e.jsx(M,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(v,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),O&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{type:"button",onClick:()=>x(t=>[...t,{id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,type:"",label:"",value:"",link:"",icon:"",display_order:t.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(U,{size:16})," 연락처 추가"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"type"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"label"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"value"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-64",children:"link"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"icon"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:h.map((t,a)=>e.jsxs(d.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsxs("select",{value:t.type,onChange:r=>{const s=r.target.value,l={email:"Mail",phone:"Phone",location:"MapPin",custom:t.icon||"Mail"},T=s==="custom"?t.icon||"Mail":l[s]||"Mail",q=[...h];q[a]={...t,type:s,icon:T},x(q)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",children:[e.jsx("option",{value:"",children:"타입 선택"}),e.jsx("option",{value:"email",children:"이메일"}),e.jsx("option",{value:"phone",children:"전화번호"}),e.jsx("option",{value:"location",children:"위치"}),e.jsx("option",{value:"custom",children:"커스텀"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.label??"",onChange:r=>{const s=[...h];s[a]={...t,label:r.target.value},x(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"이메일"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.value??"",onChange:r=>{const s=[...h];s[a]={...t,value:r.target.value},x(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"email@example.com"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.link??"",onChange:r=>{const s=[...h];s[a]={...t,link:r.target.value},x(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"mailto:email@example.com"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx(le,{value:t.icon,onChange:r=>{const s=[...h];s[a]={...t,icon:r},x(s)}})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{if(a===0)return;const r=[...h];[r[a-1],r[a]]=[r[a],r[a-1]],r.forEach((s,l)=>s.display_order=l),x(r)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>{if(a===h.length-1)return;const r=[...h];[r[a+1],r[a]]=[r[a],r[a+1]],r.forEach((s,l)=>s.display_order=l),x(r)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:async()=>{try{o(!0);const r={type:t.type.trim(),label:(t.label??"").trim()||null,value:(t.value??"").trim()||null,link:(t.link??"").trim()||null,icon:(t.icon??"").trim()||null,display_order:a};if(t.id.startsWith("local-")){const{error:l}=await n.from("contact_info").insert([r]);if(l)throw l}else{const{error:l}=await n.from("contact_info").update(r).eq("id",t.id);if(l)throw l}const{data:s}=await n.from("contact_info").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});x(s??[]),i("연락처가 저장되었습니다.")}catch(r){c(r.message||"저장 실패")}finally{o(!1)}},className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",children:"저장"}),e.jsxs("button",{type:"button",onClick:async()=>{if(!t.id.startsWith("local-"))try{o(!0);const{error:r}=await n.from("contact_info").delete().eq("id",t.id);if(r)throw r}catch(r){c(r.message||"삭제 실패")}finally{o(!1)}x(r=>r.filter((s,l)=>l!==a).map((s,l)=>({...s,display_order:l})))},className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:[e.jsx(J,{size:14})," 삭제"]})]})})]},`${t.id}-row1`),e.jsx("tr",{children:e.jsx("td",{className:"px-3 pb-4 pt-0",colSpan:7,children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"비고/설명은 필요 시 value에 포함하세요. type에 따라 아이콘 자동 매핑이 가능합니다."})})},`${t.id}-row2`)]},t.id))})]})})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>{const t=!z;R(t),localStorage.setItem("contactSocialsExpanded",JSON.stringify(t))},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"소셜 링크"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"플랫폼/URL/아이콘/색상(Tailwind 클래스) 관리"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":z?"접기":"펼치기",children:z?e.jsx(M,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(v,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),z&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{type:"button",onClick:()=>g(t=>[...t,{id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,name:"",url:"",icon:"",color:"",display_order:t.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(U,{size:16})," 소셜 추가"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"플랫폼"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-64",children:"URL"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"아이콘"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"색상 클래스"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.map((t,a)=>e.jsxs(d.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.name,onChange:r=>{const s=[...m];s[a]={...t,name:r.target.value},g(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"GitHub"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.url,onChange:r=>{const s=[...m];s[a]={...t,url:r.target.value},g(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"https://github.com/username"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.icon??"",onChange:r=>{const s=[...m];s[a]={...t,icon:r.target.value},g(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"Github/Linkedin/Twitter..."})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.color??"",onChange:r=>{const s=[...m];s[a]={...t,color:r.target.value},g(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"hover:bg-gray-900"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{if(a===0)return;const r=[...m];[r[a-1],r[a]]=[r[a],r[a-1]],r.forEach((s,l)=>s.display_order=l),g(r)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>{if(a===m.length-1)return;const r=[...m];[r[a+1],r[a]]=[r[a],r[a+1]],r.forEach((s,l)=>s.display_order=l),g(r)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:async()=>{try{o(!0);const r={name:t.name.trim(),url:t.url.trim(),icon:(t.icon??"").trim()||null,color:(t.color??"").trim()||null,display_order:a};if(t.id.startsWith("local-")){const{error:l}=await n.from("contact_socials").insert([r]);if(l)throw l}else{const{error:l}=await n.from("contact_socials").update(r).eq("id",t.id);if(l)throw l}const{data:s}=await n.from("contact_socials").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});g(s??[]),i("소셜 링크가 저장되었습니다.")}catch(r){c(r.message||"저장 실패")}finally{o(!1)}},className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",children:"저장"}),e.jsxs("button",{type:"button",onClick:async()=>{if(!t.id.startsWith("local-"))try{o(!0);const{error:r}=await n.from("contact_socials").delete().eq("id",t.id);if(r)throw r}catch(r){c(r.message||"삭제 실패")}finally{o(!1)}g(r=>r.filter((s,l)=>l!==a).map((s,l)=>({...s,display_order:l})))},className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:[e.jsx(J,{size:14})," 삭제"]})]})})]},`${t.id}-row1`),e.jsx("tr",{children:e.jsx("td",{className:"px-3 pb-4 pt-0",colSpan:6,children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"플랫폼에 맞는 색상 클래스를 Tailwind로 지정하세요. 예: hover:bg-gray-900, hover:bg-blue-700"})})},`${t.id}-row2`)]},t.id))})]})})]})]}),e.jsxs("section",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",onClick:()=>{const t=!D;B(t),localStorage.setItem("contactHoursExpanded",JSON.stringify(t))},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"업무 가능 시간"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"라벨/시간/비고로 다건 관리"})]}),e.jsx("button",{type:"button",className:"p-1 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors","aria-label":D?"접기":"펼치기",children:D?e.jsx(M,{size:20,className:"text-gray-500 dark:text-gray-400"}):e.jsx(v,{size:20,className:"text-gray-500 dark:text-gray-400"})})]})}),D&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{type:"button",onClick:()=>u(t=>[...t,{id:`local-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,label:"",time:"",note:"",display_order:t.length,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(U,{size:16})," 항목 추가"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-64",children:"라벨"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-56",children:"시간"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"비고"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"순서"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:p.map((t,a)=>e.jsxs(d.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.label,onChange:r=>{const s=[...p];s[a]={...t,label:r.target.value},u(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"월요일 - 금요일"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.time,onChange:r=>{const s=[...p];s[a]={...t,time:r.target.value},u(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"09:00 - 18:00"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{value:t.note??"",onChange:r=>{const s=[...p];s[a]={...t,note:r.target.value},u(s)},className:"w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-white dark:bg-gray-800",placeholder:"* 긴급 문의는 언제든지 연락"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{if(a===0)return;const r=[...p];[r[a-1],r[a]]=[r[a],r[a-1]],r.forEach((s,l)=>s.display_order=l),u(r)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>{if(a===p.length-1)return;const r=[...p];[r[a+1],r[a]]=[r[a],r[a+1]],r.forEach((s,l)=>s.display_order=l),u(r)},className:"px-2 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded",children:"↓"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{type:"button",onClick:async()=>{try{o(!0);const r={label:t.label.trim(),time:t.time.trim(),note:(t.note??"").trim()||null,display_order:a};if(t.id.startsWith("local-")){const{error:l}=await n.from("contact_hours").insert([r]);if(l)throw l}else{const{error:l}=await n.from("contact_hours").update(r).eq("id",t.id);if(l)throw l}const{data:s}=await n.from("contact_hours").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!0});u(s??[]),i("업무 시간이 저장되었습니다.")}catch(r){c(r.message||"저장 실패")}finally{o(!1)}},className:"px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",children:"저장"}),e.jsxs("button",{type:"button",onClick:async()=>{if(!t.id.startsWith("local-"))try{o(!0);const{error:r}=await n.from("contact_hours").delete().eq("id",t.id);if(r)throw r}catch(r){c(r.message||"삭제 실패")}finally{o(!1)}u(r=>r.filter((s,l)=>l!==a).map((s,l)=>({...s,display_order:l})))},className:"px-3 py-2 text-sm bg-red-500 text-white rounded-md hover:bg-red-600",children:[e.jsx(J,{size:14})," 삭제"]})]})})]},`${t.id}-row1`),e.jsx("tr",{children:e.jsx("td",{className:"px-3 pb-4 pt-0",colSpan:5,children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"라벨/시간/비고는 자유 텍스트입니다."})})},`${t.id}-row2`)]},t.id))})]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:C,className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(K,{size:16})," ",C?"저장 중...":"설정 저장"]})})]})})]})};export{he as default};
