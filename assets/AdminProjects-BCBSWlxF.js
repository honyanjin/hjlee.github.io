import{j as e,H as j,x as g,I as m,m as N,J as h,f as k,E as v,G as w,h as _,z,K as E,u as C}from"./ui-B0H31a0Z.js";import{r as d,a as S}from"./router-CLvrYEWH.js";import{s as x}from"./index-b5FANDsy.js";import{B as P}from"./Breadcrumb-CYQHPn83.js";import"./vendor-RGnvvjkK.js";const B=()=>{const[a,i]=d.useState([]),[u,o]=d.useState(!0),[c,n]=d.useState(""),l=S();d.useEffect(()=>{b()},[]);const b=async()=>{try{o(!0);const{data:r,error:s}=await x.from("projects").select("*").order("sort_order",{ascending:!0}).order("created_at",{ascending:!1});if(s)throw s;i(r||[])}catch(r){n("프로젝트를 불러오는데 실패했습니다."),console.error("Error fetching projects:",r)}finally{o(!1)}},p=async r=>{if(confirm("정말로 이 프로젝트를 삭제하시겠습니까?"))try{const{error:s}=await x.from("projects").delete().eq("id",r);if(s)throw s;i(a.filter(t=>t.id!==r))}catch(s){n("프로젝트 삭제에 실패했습니다."),console.error("Error deleting project:",s)}},y=async r=>{try{const{error:s}=await x.from("projects").update({is_published:!r.is_published}).eq("id",r.id);if(s)throw s;i(a.map(t=>t.id===r.id?{...t,is_published:!t.is_published}:t))}catch(s){n("프로젝트 상태 변경에 실패했습니다."),console.error("Error updating project:",s)}},f=async r=>{try{const{error:s}=await x.from("projects").update({featured:!r.featured}).eq("id",r.id);if(s)throw s;i(a.map(t=>t.id===r.id?{...t,featured:!t.featured}:t))}catch(s){n("대표 프로젝트 설정에 실패했습니다."),console.error("Error updating project:",s)}};return u?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{children:e.jsx(P,{items:[{label:"프로젝트 관리",path:"/admin/projects"}]})}),e.jsxs("div",{className:"flex justify-between items-center pb-6",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"프로젝트 관리"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>l("/admin"),className:"flex items-center gap-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(j,{size:16}),"대시보드"]}),e.jsxs("button",{onClick:()=>l("/admin/projects/categories"),className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(g,{size:16}),"프로젝트 카테고리"]}),e.jsxs("button",{onClick:()=>l("/admin/projects/new"),className:"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:[e.jsx(m,{size:16}),"새 프로젝트"]})]})]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c&&e.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:c}),e.jsx("div",{className:"grid gap-6",children:a.map((r,s)=>e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[r.featured&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full dark:bg-yellow-900 dark:text-yellow-200",children:[e.jsx(h,{size:12}),"대표"]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${r.is_published?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}`,children:r.is_published?"발행됨":"임시저장"})]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{size:14}),e.jsx("span",{children:new Date(r.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{size:14}),e.jsx("span",{children:r.category})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{children:["순서: ",r.sort_order]})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:r.tags.map(t=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full dark:bg-blue-900 dark:text-blue-200",children:t},t))}),e.jsxs("div",{className:"flex items-center gap-4",children:[r.live_url&&e.jsxs("a",{href:r.live_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[e.jsx(v,{size:14}),e.jsx("span",{className:"text-sm",children:"라이브 사이트"})]}),r.github_url&&e.jsxs("a",{href:r.github_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-gray-600 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:[e.jsx(w,{size:14}),e.jsx("span",{className:"text-sm",children:"GitHub"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>f(r),className:`p-2 rounded-lg transition-colors ${r.featured?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":"text-gray-400 hover:text-yellow-600 dark:hover:text-yellow-400"}`,title:r.featured?"대표 프로젝트 해제":"대표 프로젝트 설정",children:e.jsx(h,{size:16})}),e.jsx("button",{onClick:()=>y(r),className:`p-2 rounded-lg transition-colors ${r.is_published?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400":"text-gray-400 hover:text-green-600 dark:hover:text-green-400"}`,title:r.is_published?"발행 취소":"발행",children:r.is_published?e.jsx(_,{size:16}):e.jsx(z,{size:16})}),e.jsx("button",{onClick:()=>l(`/admin/projects/edit/${r.id}`),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"편집",children:e.jsx(E,{size:16})}),e.jsx("button",{onClick:()=>p(r.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"삭제",children:e.jsx(C,{size:16})})]})]})},r.id))}),a.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(m,{size:48,className:"mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"프로젝트가 없습니다"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"첫 번째 프로젝트를 추가해보세요."}),e.jsx("button",{onClick:()=>l("/admin/projects/new"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"프로젝트 추가"})]})]})]})};export{B as default};
