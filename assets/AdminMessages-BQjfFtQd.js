import{j as e,V as b,M as j,y as u}from"./ui-DCVn0oQs.js";import{r as t}from"./router-CLvrYEWH.js";import{B as f}from"./Breadcrumb-8-fVWiwT.js";import{s as o}from"./index-BJQaA9zI.js";import"./vendor-RGnvvjkK.js";const S=()=>{const[m,d]=t.useState(!0),[r,i]=t.useState([]),[l,c]=t.useState(""),[g,x]=t.useState(null),n=async()=>{try{d(!0);const{data:s,error:a}=await o.from("contact_messages").select("*").order("created_at",{ascending:!1});if(a)throw a;i(s||[])}catch(s){c(s.message||"메시지를 불러오지 못했습니다.")}finally{d(!1)}};t.useEffect(()=>{n()},[]);const h=async s=>{try{x(s);const{error:a}=await o.from("contact_messages").delete().eq("id",s);if(a)throw a;i(p=>p.filter(y=>y.id!==s))}catch(a){c(a.message||"삭제 실패")}finally{x(null)}};return e.jsxs("div",{className:"w-full",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx(f,{items:[{label:"Contact 메시지",path:"/admin/messages"}]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Contact 메시지"})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l&&e.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-md",children:l}),m?e.jsxs("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-300",children:[e.jsx(b,{className:"h-5 w-5 animate-spin text-blue-600"})," 불러오는 중..."]}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx(j,{size:18}),e.jsxs("span",{children:["총 ",r.length,"건"]})]}),e.jsx("button",{onClick:n,className:"text-sm px-3 py-1.5 rounded-md bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200",children:"새로고침"})]}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"수신된 메시지가 없습니다."}):r.map(s=>e.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-12 gap-2 md:gap-4",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:s.subject}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(s.created_at).toLocaleString()})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-200",children:s.name}),e.jsx("a",{href:`mailto:${s.email}`,className:"text-xs text-blue-600 dark:text-blue-400",children:s.email})]}),e.jsx("div",{className:"md:col-span-5",children:e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap break-words",children:s.message})}),e.jsx("div",{className:"md:col-span-1 flex md:justify-end",children:e.jsxs("button",{onClick:()=>h(s.id),disabled:g===s.id,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50",title:"삭제",children:[e.jsx(u,{size:14})," 삭제"]})})]},s.id))})]})]})]})};export{S as default};
